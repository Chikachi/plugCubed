/*
 Copyright (C) 2012-2013 Thomas "TAT" Andresen and other contributors

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
var plugCubed,B;function L(b){return!isNaN(parseInt(b,10))&&isFinite(b)}function T(b){return/^(#|)(([0-9A-F]{6}$)|([0-9A-F]{3}$))/i.test("#"===b.substr(0,1)?b:"#"+b)}Math.sa=function(){return 1+Math.floor(10*Math.random())};void 0!==plugCubed&&plugCubed.close();
requirejs.Ba("c4161/e80a1/cf1e8")?(define("plugCubed/Model","jquery underscore c4161/e80a1/cf1e8 c4161/e80a1/a11b0 c4161/f8916/c0277 c4161/b933e/fa706 c4161/fd1b2/e2fef c4161/dee2b/cbe1d c4161/a8590/d5736 c4161/adfed/af575 c4161/adfed/e6125 c4161/dee2b/af141 lang/Lang c4161/da043/d49a9/a9e53 c4161/a8590/b18da c4161/a8590/b7275 plugCubed/StyleManager c4161/da043/d49a9/f13d3/d6a18 c4161/da043/d49a9/f13d3/f5752 plugCubed/RoomUserListRow plugCubed/Lang plugCubed/Utils c4161/b933e/d7906 c4161/dee2b/ac169 plugCubed/dialogs/CustomChatColors plugCubed/dialogs/Commands plugCubed/Slider".split(" "),function(b,
m,f,d,l,e,k,p,M,q,U,ba,V,x,ca,da,y,ea,fa,ga,c,n,G,W,H,X,Y){function t(a,b,c){return void 0===B[a]||void 0===B[a][b]?c:B[a][b]}function z(a,b,c){void 0===B[a]&&(B[a]={});B[a][b]=c}function I(a){if(void 0!==a){J=!0;r={};u={};if(void 0!==a.colors){if(a.colors.background?y.set("rss-background-color","body { background-color: "+("#"!==a.colors.background.substr(0,1)?"#":"")+a.colors.background+"!important; }"):y.j("rss-background-color"),void 0!==a.colors.chat){var h={},c;for(c in a.colors.chat)-1<"admin ambassador bouncer cohost residentdj leader host manager volunteer".split(" ").indexOf(c)&&
T(a.colors.chat[c])&&(h[c]="#"===a.colors.chat[c].substr(0,1)?a.colors.chat[c].substr(1):a.colors.chat[c]);r=h}}else y.j("rss-background-color");void 0!==a.images?(x.defaultRoomElements(),void 0!==a.images.audience?b("#room-wheel").css("display",a.images.audience.wheel&&"false"===a.images.audience.wheel?"none":""):b("#room-wheel").css("display",""),d.trigger("audience:redraw"),a.images.background?y.set("rss-background-image",'body { background-image: url("'+a.images.background+'")!important; }'):
y.j("rss-background-image"),void 0===b("#playback .background img").data("_o")&&b("#playback .background img").data("_o",b("#playback .background img").attr("src")),b("#playback .background img").attr("src",a.images.ra?a.images.ra:b("#playback .background img").data("_o")),b("#p3-dj-booth").remove(),void 0!==a.images.booth&&b("#dj-booth").append(b('<div id="p3-dj-booth">').css("background-image",'url("'+a.images.booth.booth+'")')),u=a.images.icons):(x.defaultRoomElements(),b("#room-wheel").css("display",
""),y.j("rss-background-image"),y.j("rss-booth"),d.trigger("audience:redraw"));plugCubed.C()}}function N(){var a=p.get("description"),h=plugCubed.settings.useRoomSettings[window.location.pathname.split("/")[1]];if(null!==a&&-1<a.indexOf("@p3=")){a=a.substr(a.indexOf("@p3=")+4);if(void 0===h||!0===h)return b.getJSON(a,function(a){n.chatLog(void 0,c.i18n("roomSpecificSettingsHeader")+'</span><br /><span class="chat-text" style="color:#66FFFF">'+c.i18n("roomSpecificSettingsDesc"),plugCubed.colors.fa);
I(a)});J=!0;plugCubed.Da()}}function E(a){a=a.trim();"@"===a.substr(0,1)&&(a=a.substr(1));var b=API.getUsers(),c;for(c in b)if(("string"!==typeof a?0:b[c].username.toLowerCase()===a.toLowerCase())||("string"!==typeof a?0:b[c].id.toLowerCase()===a.toLowerCase()))return b[c];return null}function F(a){a=E(a);if(null===a)API.chatLog(c.i18n("error.userNotFound"));else{var b,g,e,d,p=a.djPoints+a.curatorPoints+a.listenerPoints;g=API.getWaitListPosition(a.id);var f=API.getDJ().id===a.id;e=a.language;d=l.uiLanguages.concat(l.chatLanguages);
var q=t(a.id,"disconnects",{count:0});for(b in d)d.value===e&&(e=d[b].label);b=API.hasPermission(a.id,API.ROLE.ADMIN)?c.i18n("ranks.admin"):API.hasPermission(a.id,API.ROLE.AMBASSADOR)?c.i18n("ranks.ambassador"):API.hasPermission(a.id,API.ROLE.HOST)?c.i18n("ranks.host"):API.hasPermission(a.id,API.ROLE.COHOST)?c.i18n("ranks.cohost"):API.hasPermission(a.id,API.ROLE.MANAGER)?c.i18n("ranks.manager"):API.hasPermission(a.id,API.ROLE.BOUNCER)?c.i18n("ranks.bouncer"):API.hasPermission(a.id,API.ROLE.RESIDENTDJ)?
c.i18n("ranks.residentdj"):c.i18n("ranks.regular");d=f?c.i18n("info.djing"):-1<g?c.i18n("info.inWaitlist",g+1,API.getWaitList().length):c.i18n("info.notInList");switch(a.status){default:g=c.i18n("status.available");break;case API.STATUS.AFK:g=c.i18n("status.afk");break;case API.STATUS.WORKING:g=c.i18n("status.working");break;case API.STATUS.GAMING:g=c.i18n("status.gaming")}switch(a.vote){case -1:e=c.i18n("vote.meh");break;default:e=c.i18n("vote.undecided");break;case 1:e=c.i18n("vote.woot")}f&&(e=
c.i18n("vote.djing"));f=void 0;n.isPlugCubedDeveloper(a.id)&&(f=c.i18n("info.specialTitles.developer"));n.isPlugCubedSponsor(a.id)&&(f=c.i18n("info.specialTitles.sponsor"));n.isPlugCubedVIP(a.id)&&(f=c.i18n("info.specialTitles.vip"));n.chatLog(void 0,'<table style="width:100%;color:#CC00CC"><tr><td colspan="2"><strong>'+c.i18n("info.name")+'</strong>: <span style="color:#FFFFFF">'+k.cleanTypedString(a.username)+"</span></td></tr>"+(f?'<tr><td colspan="2"><strong>'+c.i18n("info.title")+'</strong>: <span style="color:#FFFFFF">'+
f+"</span></td></tr>":"")+'<tr><td colspan="2"><strong>'+c.i18n("info.id")+'</strong>: <span style="color:#FFFFFF">'+a.id+"</span></td></tr><tr><td><strong> "+c.i18n("info.rank")+'</strong>: <span style="color:#FFFFFF">'+b+"</span></td><td><strong>"+c.i18n("info.joined")+'</strong>: <span style="color:#FFFFFF">'+plugCubed.k(t(a.id,"joinTime",Date.now()))+"</span></td></tr><tr><td><strong>"+c.i18n("info.status")+'</strong>: <span style="color:#FFFFFF">'+g+"</span></td><td><strong> "+c.i18n("info.vote")+
'</strong>: <span style="color:#FFFFFF">'+e+'</span></td></tr><tr><td colspan="2"><strong>'+c.i18n("info.position")+'</strong>: <span style="color:#FFFFFF">'+d+"</span></td></tr><tr><td><strong>"+c.i18n("info.points")+'</strong>: <span style="color:#FFFFFF" title = "'+c.i18n("info.pointType.dj",a.djPoints)+"&#13; "+c.i18n("info.pointType.listener",a.listenerPoints)+"&#13; "+c.i18n("info.pointType.curator",a.curatorPoints)+'">'+p+"</span></td><td><strong> "+c.i18n("info.fans")+'</strong>: <span style="color:#FFFFFF">'+
a.fans+"</span></td></tr><tr><td><strong>"+c.i18n("info.wootCount")+'</strong>: <span style="color:#FFFFFF">'+t(a.id,"wootcount",0)+"</span></td><td><strong>"+c.i18n("info.mehCount")+'</strong>: <span style="color:#FFFFFF">'+t(a.id,"mehcount",0)+'</span></td></tr><tr><td colspan="2"><strong>'+c.i18n("info.ratio")+'</strong>: <span style="color:#FFFFFF">'+function(a,b){if(0===b)return 0===a?"0:0":"1:0";for(var c=1;c<=b;c++){var h=a/b*c;if(0===h%1)return h+":"+c}}(t(a.id,"wootcount",0),t(a.id,"mehcount",
0))+"</span></td></tr><tr><td><strong>"+c.i18n("info.disconnects")+'</strong>: <span style="color:#FFFFFF">'+q.count+"</td></tr>"+(0<q.count?'<tr><td colspan="2"><strong>'+c.i18n("info.lastDisconnect")+'</strong></td></tr><tr><td colspan="2"><strong>'+c.i18n("info.lastPosition")+'</strong>: <span style="color:#FFFFFF">'+(-1>q.position?"Wasn't in booth nor waitlist":0>q.position?"Was DJing":"Was "+(q.position+1)+" in waitlist")+'</span></td></tr><tr><td colspan="2"><strong>'+c.i18n("info.lastDisconnect")+
'</strong>: <span style="color:#FFFFFF">'+plugCubed.k(q.time)+"</span></td></tr>":"")+"</table>")}}function O(){var a=b('<table style="width:100%;color:#CC00CC"/>'),c=API.getUsers(),g;for(g in c)a.append(b("<tr/>").append(b("<td/>").append(c[g].username)).append(b("<td/>").append(c[g].id)));n.chatLog(void 0,b("<div/>").append(a).html())}function D(){document.getElementById("chat-sound").Ia()}function P(){var a=API.getDJ();null!==a&&a.id!==API.getUser().id&&b("#woot").click()}function Z(){if(plugCubed.settings.afkTimers&&
b("#waitlist-button").hasClass("selected"))for(var a=API.getWaitList(),c=b("#waitlist .user"),g=0;g<a.length;g++){var e=Date.now()-t(a[g].id,"lastChat",t(a[g].id,"joinTime",Date.now()));1>b(c[g]).find(".afkTimer").length?b(c[g]).find(".meta").append(b("<div>").addClass("afkTimer").text(plugCubed.k(e,36E5>e?"mm:ss":"hh:mm:ss"))):b(c[g]).find(".afkTimer").text(plugCubed.k(e,36E5>e?"mm:ss":"hh:mm:ss"))}}function Q(a){if(a.from&&a.from.id){if("mention"===a.type){a.type+=" is-";API.hasPermission(a.from.id,
API.ROLE.ADMIN)?a.type+="admin":API.hasPermission(a.from.id,API.ROLE.ya)?a.type+="ambassador":API.hasPermission(a.from.id,API.ROLE.BOUNCER)?a.type+="staff":API.hasPermission(a.from.id,API.ROLE.wa)?a.type+="dj":a.type+="you";var b=RegExp("@"+API.getUser().username,"g");a.text=a.text.replace(b,'<span class="name">@'+API.getUser().username+"</span>")}a.type+=" from";if(API.hasPermission(a.from.id,API.ROLE.RESIDENTDJ)||a.from.id==API.getUser().id)a.type+="-";API.hasPermission(a.from.id,API.ROLE.ADMIN)?
a.type+="admin":API.hasPermission(a.from.id,API.ROLE.AMBASSADOR)?a.type+="ambassador":API.hasPermission(a.from.id,API.ROLE.HOST)?a.type+="host":API.hasPermission(a.from.id,API.ROLE.COHOST)?a.type+="cohost":API.hasPermission(a.from.id,API.ROLE.MANAGER)?a.type+="manager":API.hasPermission(a.from.id,API.ROLE.BOUNCER)?a.type+="bouncer":API.hasPermission(a.from.id,API.ROLE.RESIDENTDJ)?a.type+="residentdj":a.from.id==API.getUser().id&&(a.type+="you")}}function aa(){R=setInterval(Z,1E3);this.colors={Ka:"66FFFF",
Ea:"FF0000",T:"FFFF00",fa:"66FFFF"};this.R=c.i18n("autorespond.default");setTimeout(function(){v=[];var a=API.getHistory(),b;for(b in a){var c=a[b];v.push({id:c.media.id,author:c.media.author,title:c.media.title,D:!1,dj:{id:c.user.id.toString(),username:c.user.username}})}},1);this.q=b('<style type="text/css" />');b("head").append(this.q);n.chatLog(void 0,c.i18n("running",C)+'</span><br /><span class="chat-text" style="color:#66FFFF">'+c.i18n("commandsHelp"),this.colors.T);window.addEventListener("pushState",
this.proxy.n);b("body").prepend('<link rel="stylesheet" type="text/css" id="plugcubed-css" href="http://alpha.plugcubed.net/plugCubed.css?='+Date.now()+'" />');b("#plug-dj").after(S);S.click(this.proxy.I);b("#room-bar").css("left",108);this.ha();this.ga();var a=API.getUsers(),h;for(h in a)0>t(a[h].id,"joinTime",-1)&&z(a[h].id,"joinTime",Date.now());b("#chat-header").append(b("<div>").addClass("chat-header-button p3-s-stream").data("key","stream").click(this.proxy.m).mouseover(function(){d.trigger("tooltip:show",
c.i18n("tooltip.stream"),b(this),!0)}).mouseout(function(){d.trigger("tooltip:hide")})).append(b("<div>").addClass("chat-header-button p3-s-clear").data("key","clear").click(this.proxy.m).mouseover(function(){d.trigger("tooltip:show",c.i18n("tooltip.clear"),b(this),!0)}).mouseout(function(){d.trigger("tooltip:hide")}));this.d("stream",G.settings.streamDisabled);d.on("chat:receive",Q);d._events["chat:receive"].unshift(d._events["chat:receive"].pop());this.N();this.loaded=!0;N();b("#footer-links").append(b("<div />").addClass("footer").addClass("plugcubed-footer").css("top",
12).html(c.i18n("running",C)+c.i18n("footer.seperator")).append(b("<span />").addClass("plugcubed-status").text(c.i18n("footer.socket",c.i18n("footer.unknown")))))}function w(a,c,g){return b('<div class="item">').addClass("p3-s-"+c+(a?" selected":"")).append(b('<i class="icon icon-check-blue"></i>')).append(b("<span>").text(g)).data("key",c).click(plugCubed.proxy.m)}U.sio.$events.chat=q.listener.chat=function(a){if("undefined"!==typeof plugCubed&&(a.fromID&&z(a.fromID,"lastChat",Date.now()),-1<plugCubed.settings.ignore.indexOf(a.fromID))){plugCubed.Q(a);
return}l.receive(a);API.dispatch(API.CHAT,a)};var R,C={ia:3,ja:0,qa:0,J:"alpha",ba:111,F:!0,toString:function(){return this.ia+"."+this.ja+"."+this.qa+(void 0!==this.J&&""!==this.J?"-"+this.J:"")+(this.F?"_min":"")+" (Build "+this.ba+")"}},v=[],J=!1,K=!1,r={},u={},S=b('<div id="plug-cubed"><i class="icon icon-plug-cubed"></i></div>'),A,s;return f.extend({init:function(){"undefined"===typeof B&&(B={});this.proxy={t:b.proxy(this.t,this),m:b.proxy(this.m,this),u:b.proxy(this.u,this),B:b.proxy(this.B,
this),v:b.proxy(this.v,this),w:b.proxy(this.w,this),A:b.proxy(this.A,this),s:b.proxy(this.s,this),e:b.proxy(this.e,this),n:b.proxy(this.n,this),I:b.proxy(this.I,this)};c.load(e.getItem("plugCubedLang"),b.proxy(aa,this))},n:function(){"undefined"!==typeof plugCubed&&setTimeout(function(){API.enabled?b.getScript("http://alpha.plugcubed.net/plugCubed."+(C.F?"min.":"")+"js?="+Date.now()):plugCubed.n()},500)},close:function(){void 0!==this.loaded&&!1!==this.loaded&&(clearInterval(R),I({}),window.removeEventListener("pushState",
plugCubed.proxy.n),API.off(API.CHAT_COMMAND,this.proxy.t),API.off(API.DJ_ADVANCE,this.proxy.u),API.off(API.VOTE_UPDATE,this.proxy.B),API.off(API.CURATE_UPDATE,this.proxy.v),API.off(API.USER_JOIN,this.proxy.w),API.off(API.USER_LEAVE,this.proxy.A),API.off(API.CHAT,this.proxy.s),API.off(API.VOTE_SKIP,this.proxy.e),API.off(API.USER_SKIP,this.proxy.e),API.off(API.MOD_SKIP,this.proxy.e),d.off("chat:receive",Q),b("#plugcubed-css,#font-awesome,#plugcubed-js-extra,#side-right,#side-left,#notify-dialog,.plugcubed-footer,#plug-cubed,#p3-settings,#p3-settings-custom-colors,.p3-s-stream,.p3-s-clear,#waitlist .user .afkTimer").remove(),
b("#room-bar").css("left",54),this.q&&this.q.remove(),s&&(s.onclose=function(){console.log("[plug³ Socket Server]","Closed")},s.close()),requirejs.undef("plugCubed/Model"),requirejs.undef("plugCubed/dialogs/Notify"),requirejs.undef("plugCubed/dialogs/CustomChatColors"),requirejs.undef("plugCubed/dialogs/Commands"),requirejs.undef("plugCubed/Lang"),requirejs.undef("plugCubed/MenuView"),requirejs.undef("plugCubed/Utils"),requirejs.undef("plugCubed/Slider"),requirejs.undef("plugCubed/Loader"),requirejs.undef("plugCubed/RoomUserListRow"),
y.ca(),requirejs.undef("plugCubed/StyleManager"),this.loaded=!1,delete plugCubed)},N:function(){if(void 0===s||s.readyState!==SockJS.OPEN)s=new SockJS("http://socket.plugcubed.net/gateway"),s.o=0,console.log("[plug³ Socket Server]",K?"Reconnecting":"Connecting"),s.onopen=function(){this.o=0;console.log("[plug³ Socket Server]",K?"Reconnected":"Connected");var a=API.getUser();this.send(JSON.stringify({type:"userdata",id:a.id,username:a.username,room:p.get("id"),version:C.toString()}));b(".plugcubed-status").text(c.i18n("footer.socket",
c.i18n("footer.online")))},s.onmessage=function(a){var h=JSON.parse(a.data);a=h.type;h=h.data;if("update"===a)return this.onclose=function(){},this.close(),n.chatLog(void 0,c.i18n("newVersion"),plugCubed.colors.T),setTimeout(function(){b.getScript("http://alpha.plugcubed.net/plugCubed."+(C.F?"min.":"")+"js")},5E3);if("chat"===a){if(!h.chatID||0<b(".chat-id-"+h.chatID).length||-1<plugCubed.settings.ignore.indexOf(h.fromID))return;l.receive(h);return API.trigger(API.CHAT,h)}if("rave"===a&&(n.isPlugCubedDeveloper(h.id)||
n.isPlugCubedSponsor(h.id)||API.hasPermission(h.id,API.ROLE.HOST))){switch(h.value){case 0:return clearTimeout(x.strobeTimeoutID),x.lightsOut(!1);case 1:return x.strobeOnSpeed=50,x.strobeOffSpeed=160,x.strobeSwap();case 2:return x.lightsOut(!0)}if(50<=h.value&&100>=h.value)return x.strobeOnSpeed=h.value,x.strobeOffSpeed=3.2*h.value,x.strobeSwap()}if("broadcast"===a&&(n.isPlugCubedDeveloper(h.id)||n.isPlugCubedSponsor(h.id)))return n.chatLog("system","<strong>Broadcast from a "+c.i18n("info.specialTitles."+
(n.isPlugCubedDeveloper(h.id)?"developer":"sponsor"))+'</strong><br /><span style="color:#FFFFFF;font-weight:400">'+h.message+"</span>")},s.onclose=function(){console.log("[plug³ Socket Server]","Closed");this.o++;K=!0;var a;if(5>this.o)a=5;else if(30>this.o)a=30;else if(60>this.o)a=60;else return;setTimeout(function(){plugCubed.N()},1E3*a);b(".plugcubed-status").text(c.i18n("footer.socket",c.i18n("footer.offline")))}},a:{b:{you:{title:"ranks.you",color:"FFDD6F"},regular:{title:"ranks.regular",color:"B0B0B0"},
residentdj:{title:"ranks.residentdj",color:"AC76FF"},bouncer:{title:"ranks.bouncer",color:"AC76FF"},manager:{title:"ranks.manager",color:"AC76FF"},cohost:{title:"ranks.cohost",color:"AC76FF"},host:{title:"ranks.host",color:"AC76FF"},ambassador:{title:"ranks.ambassador",color:"89BE6C"},admin:{title:"ranks.admin",color:"42A5DC"}},H:{join:{title:"notify.join",color:"3366FF"},leave:{title:"notify.leave",color:"3366FF"},curate:{title:"notify.curate",color:"00FF00"},stats:{title:"notify.stats",color:"66FFFF"},
updates:{title:"notify.updates",color:"FFFF00"},ta:{title:"notify.songLength",color:"66FFFF"}}},settings:{recent:!1,awaymsg:"",autowoot:!1,autorespond:!1,notify:0,customColors:!1,avatarAnimations:!0,registeredSongs:[],ignore:[],alertson:[],autoMuted:!1,afkTimers:!1,r:10,useRoomSettings:{},colors:{you:"FFDD6F",regular:"B0B0B0",residentdj:"E90E82",bouncer:"E90E82",manager:"E90E82",cohost:"E90E82",host:"E90E82",ambassador:"9A50FF",admin:"42A5DC",join:"3366FF",leave:"3366FF",curate:"00FF00",stats:"66FFFF",
updates:"FFFF00",ta:"66FFFF"}},ha:function(){try{var a=JSON.parse(e.getItem("plugCubed")),b;for(b in this.settings)void 0!==a[b]&&(this.settings[b]=a[b]);this.settings.recent=!1;this.settings.autowoot&&P();this.C();this.settings.afkTimers&&y.set("waitListMove","#waitlist .list .user .name { top: 2px; }");127<this.settings.notify&&(this.settings.notify=0);0<this.settings.registeredSongs.length&&-1<this.settings.registeredSongs.indexOf(API.getMedia().id)?(setTimeout(function(){API.setVolume(0)},800),
this.i=API.getVolume(),this.settings.autoMuted=!0,API.chatLog(c.i18n("automuted",API.getMedia().title))):this.settings.autoMuted=!1}catch(g){}},f:function(){e.setItem("plugCubed",JSON.stringify(this.settings))},C:function(){var a=[],b=this.settings.useRoomSettings[window.location.pathname.split("/")[1]];((b=void 0===b||!0===b?!0:!1)&&r.regular||this.settings.colors.regular!==this.a.b.regular.color)&&a.push(".message.from > .from,",".emote.from > .from,",".mention.from > .from { color:#"+(this.settings.colors.regular!==
this.a.b.regular.color?this.settings.colors.regular:r.regular)+"!important; }");(b&&r.residentdj||this.settings.colors.residentdj!==this.a.b.residentdj.color)&&a.push(".message.from-residentdj > .from,",".emote.from-residentdj > .from,",".mention.from-residentdj > .from { color:#"+(this.settings.colors.residentdj!==this.a.b.residentdj.color?this.settings.colors.residentdj:r.residentdj)+"!important; }");(b&&r.bouncer||this.settings.colors.bouncer!==this.a.b.bouncer.color)&&a.push(".message.from-bouncer > .from,",
".emote.from-bouncer > .from,",".mention.from-bouncer > .from { color:#"+(this.settings.colors.bouncer!==this.a.b.bouncer.color?this.settings.colors.bouncer:r.bouncer)+"!important; }");(b&&r.manager||this.settings.colors.manager!==this.a.b.manager.color)&&a.push(".message.from-manager > .from,",".emote.from-manager > .from,",".mention.from-manager > .from { color:#"+(this.settings.colors.manager!==this.a.b.manager.color?this.settings.colors.manager:r.manager)+"!important; }");(b&&r.cohost||this.settings.colors.cohost!==
this.a.b.cohost.color)&&a.push(".message.from-cohost > .from,",".emote.from-cohost > .from,",".mention.from-cohost > .from { color:#"+(this.settings.colors.cohost!==this.a.b.cohost.color?this.settings.colors.cohost:r.cohost)+"!important; }");(b&&r.host||this.settings.colors.host!==this.a.b.host.color)&&a.push(".message.from-host > .from,",".emote.from-host > .from,",".mention.from-host > .from { color:#"+(this.settings.colors.host!==this.a.b.host.color?this.settings.colors.host:r.host)+"!important; }");
(b&&r.ambassador||this.settings.colors.ambassador!==this.a.b.ambassador.color)&&a.push(".message.from-ambassador > .from,",".emote.from-ambassador > .from,",".mention.from-ambassador > .from { color:#"+(this.settings.colors.ambassador!==this.a.b.ambassador.color?this.settings.colors.ambassador:r.ambassador)+"!important; }");(b&&r.admin||this.settings.colors.admin!==this.a.b.admin.color)&&a.push(".message.from-admin > .from,",".emote.from-admin > .from,",".mention.from-admin > .from { color:#"+(this.settings.colors.admin!==
this.a.b.admin.color?this.settings.colors.admin:r.admin)+"!important; }");(b&&r.you||this.settings.colors.you!==this.a.b.you.color)&&a.push(".message.from-you > .from,",".emote.from-you > .from,",".mention.from-you > .from { color:#"+(this.settings.colors.you!==this.a.b.you.color?this.settings.colors.you:r.you)+"!important; }");b&&(u.admin&&a.push(".message.from-admin > .icon,",".emote.from-admin > .icon,",'.mention.from-admin > .icon { background-image: url("'+u.admin+'"); background-position: 0 0; }'),
u.ambassador&&a.push(".message.from-ambassador > .icon,",".emote.from-ambassador > .icon,",'.mention.from-ambassador > .icon { background-image: url("'+u.ambassador+'"); background-position: 0 0; }'),u.bouncer&&a.push(".message.from-bouncer > .icon,",".emote.from-bouncer > .icon,",'.mention.from-bouncer > .icon { background-image: url("'+u.bouncer+'"); background-position: 0 0; }'),u.cohost&&a.push(".message.from-cohost > .icon,",".emote.from-cohost > .icon,",'.mention.from-cohost > .icon { background-image: url("'+
u.cohost+'"); background-position: 0 0; }'),u.residentdj&&a.push(".message.from-residentdj > .icon,",".emote.from-residentdj > .icon,",'.mention.from-residentdj > .icon { background-image: url("'+u.residentdj+'"); background-position: 0 0; }'),u.host&&a.push(".message.from-host > .icon,",".emote.from-host > .icon,",'.mention.from-host > .icon { background-image: url("'+u.host+'"); background-position: 0 0; }'),u.manager&&a.push(".message.from-manager > .icon,",".emote.from-manager > .icon,",'.mention.from-manager > .icon { background-image: url("'+
u.manager+'"); background-position: 0 0; }'));this.q.text(a.join("\n"))},ga:function(){API.on(API.CHAT_COMMAND,this.proxy.t);API.on(API.DJ_ADVANCE,this.proxy.u);API.on(API.VOTE_UPDATE,this.proxy.B);API.on(API.CURATE_UPDATE,this.proxy.v);API.on(API.USER_JOIN,this.proxy.w);API.on(API.USER_LEAVE,this.proxy.A);API.on(API.CHAT,this.proxy.s);API.on(API.VOTE_SKIP,this.proxy.e);API.on(API.USER_SKIP,this.proxy.e);API.on(API.MOD_SKIP,this.proxy.e)},d:function(a,c){b(".p3-s-"+a).removeClass("selected");c&&b(".p3-s-"+
a).addClass("selected")},V:function(a,b){if(API.hasPermission(void 0,API.ROLE.BOUNCER)){var g;switch(b){case "removedj":g=API.moderateRemoveDJ;break;case "adddj":g=API.moderateAddDJ;break;default:API.chatLog(c.i18n("error.unknownModeration"));return}var e=E(a);null===e?API.chatLog(c.i18n("error.userNotFound")):g(e.id," ")}},I:function(){if(void 0!==A)return"0px"===A.css("left")?(A.animate({left:-270}),H.hide()):A.animate({left:0});A=b('<div id="p3-settings" style="left: -270px;">').append(b('<div class="header">').append(b('<div class="back">').append(b('<i class="icon icon-back"></i>')).click(function(){void 0!==
A&&A.animate({left:-270});H.hide()})).append(b('<div class="title">').append(b('<i class="icon icon-settings"></i>')).append(b("<span>plug&#179;</span>")).append(b("<span>").addClass("version").text(C)))).append(b('<div class="container">').append(b('<div class="section">Features</div>')).append(w(this.settings.autowoot,"woot",c.i18n("menu.autowoot"))).append(w(this.settings.autorespond,"autorespond",c.i18n("menu.autorespond"))).append(b('<div class="item">').addClass("p3-s-autorespond-input").append(b("<input>").val(""===
plugCubed.settings.awaymsg?this.R:plugCubed.settings.awaymsg).keyup(function(){b(this).val(b(this).val().split("@").join(""));plugCubed.settings.awaymsg=b(this).val().trim()})).mouseover(function(){d.trigger("tooltip:show",c.i18n("tooltip.afk"),b(this),!0)}).mouseout(function(){d.trigger("tooltip:hide")})).append(API.hasPermission(void 0,API.ROLE.BOUNCER)?w(this.settings.afkTimers,"afktimers",c.i18n("menu.afktimers")):"").append(J?w(void 0!==this.settings.useRoomSettings[window.location.pathname.split("/")[1]]?
this.settings.useRoomSettings[window.location.pathname.split("/")[1]]:!0,"roomsettings",c.i18n("menu.roomsettings")):"").append(w(!1,"colors",c.i18n("menu.customchatcolors")+"...")).append(b('<div class="spacer">').append(b('<div class="divider">'))).append(b('<div class="section">'+c.i18n("notify.header")+"</div>")).append(w(1===(this.settings.notify&1),"notify-join",c.i18n("notify.join")).data("bit",1)).append(w(2===(this.settings.notify&2),"notify-leave",c.i18n("notify.leave")).data("bit",2)).append(w(4===
(this.settings.notify&4),"notify-curate",c.i18n("notify.curate")).data("bit",4)).append(w(8===(this.settings.notify&8),"notify-stats",c.i18n("notify.stats")).data("bit",8)).append(w(16===(this.settings.notify&16),"notify-updates",c.i18n("notify.updates")).data("bit",16)));(API.hasPermission(void 0,API.ROLE.BOUNCER)||n.isPlugCubedDeveloper())&&A.find(".container").append(w(32===(this.settings.notify&32),"notify-history",c.i18n("notify.history")).data("bit",32).data("perm",API.ROLE.BOUNCER)).append(w(64===
(this.settings.notify&64),"notify-songlength",c.i18n("notify.songLength")).data("bit",64).data("perm",API.ROLE.BOUNCER)).append((new Y(5,20,plugCubed.settings.r,function(a){console.log("Setting",a);plugCubed.settings.r=a})).p.css("left",40).mouseover(function(){d.trigger("tooltip:show",c.i18n("tooltip.songLength"),b(this),!0)}).mouseout(function(){d.trigger("tooltip:hide")}));A.animate({left:0});b("body").append(A)},m:function(a){a=b(a.currentTarget).data("key");switch(a){case "woot":this.settings.autowoot=
!this.settings.autowoot;this.d("woot",this.settings.autowoot);this.settings.autowoot&&b("#woot").click();break;case "colors":H.K();break;case "autorespond":this.settings.autorespond=!this.settings.autorespond;this.d("autorespond",this.settings.autorespond);this.settings.autorespond?(""===this.settings.awaymsg.trim()&&(this.settings.awaymsg=this.R),b("#chat-input-field").attr("disabled","disabled").attr("placeholder",c.i18n("autorespond.disable")),0>=API.getUser().status&&API.setStatus(API.STATUS.AFK)):
(b("#chat-input-field").removeAttr("disabled").attr("placeholder",V.chat.placeholder),API.setStatus(API.STATUS.AVAILABLE));break;case "notify-join":case "notify-leave":case "notify-curate":case "notify-stats":case "notify-updates":case "notify-history":case "notify-songlength":if(!b(".p3-s-"+a).data("perm")||API.hasPermission(void 0,b(".p3-s-"+a).data("perm"))||n.isPlugCubedDeveloper()){var h=b(".p3-s-"+a).data("bit");this.settings.notify+=(this.settings.notify&h)===h?-h:h;this.d(a,(this.settings.notify&
h)===h);d.trigger("notify","icon-chat-system",[c.i18n(a.split("-").join(".")),c.i18n("notify.header"),(this.settings.notify&h)===h?"enabled":"disabled"].join(" "))}break;case "stream":W.set("streamDisabled",!G.settings.streamDisabled);this.d("stream",G.settings.streamDisabled);return;case "clear":l.clear();return;case "roomsettings":a=this.settings.useRoomSettings[window.location.pathname.split("/")[1]];a=void 0===a||!0===a?!1:!0;this.settings.useRoomSettings[window.location.pathname.split("/")[1]]=
a;(a?N:I)({});this.d("roomsettings",a);break;case "afktimers":this.settings.afkTimers=!this.settings.afkTimers;this.d("afktimers",this.settings.afkTimers);this.settings.afkTimers?y.set("waitListMove","#waitlist .list .user .name { top: 2px; }"):(y.j("waitListMove"),b("#waitlist .user .afkTimer").remove());break;default:return API.chatLog(c.i18n("error.unknownMenuKey",a))}this.f()},Ha:function(){for(var a in this.settings.colors){var c=b('input[name="'+a+'"]');c.val(c.data("ph"));c.parents(".dialog-input-container").find(".dialog-input-label").css("color",
"#"+c.val())}},u:function(a){8===(this.settings.notify&8)&&n.chatLog(void 0,c.i18n("notify.message.stats",a.U.Y.Ja,a.U.Y.Fa,a.U.Y.Aa),this.settings.colors.stats);16===(this.settings.notify&16)&&n.chatLog(void 0,c.i18n("notify.message.updates",a.media.title,a.media.author,k.cleanTypedString(a.dj.username)),this.settings.colors.updates);64===(this.settings.notify&64)&&a.media.duration>1E3*this.settings.r&&(D(),setTimeout(function(){D()},50),API.chatLog(c.i18n("notify.message.songLength",this.settings.r),
!0));setTimeout(b.proxy(this.la,this),1E3*Math.sa());this.ma(a.media.id);50<v.unshift({id:a.media.id,author:a.media.author,title:a.media.title,D:!1,user:{id:a.dj.id,username:a.dj.username}})&&v.splice(50,v.length-50);this.settings.autoMuted&&0>this.settings.registeredSongs.indexOf(a.media.id)&&(setTimeout(function(){API.setVolume(plugCubed.i)},800),this.settings.autoMuted=!1);!this.settings.autoMuted&&-1<this.settings.registeredSongs.indexOf(a.media.id)&&(setTimeout(function(){API.setVolume(0)},800),
this.settings.autoMuted=!0,this.i=API.getVolume(),API.chatLog(c.i18n("automuted",a.media.title)));a=API.getUsers();for(var h in a)z(a[h].id,"curVote",0)},B:function(a){if(a&&a.user){var b=t(a.user.id,"curVote",0);1===b?z(a.user.id,"wootcount",t(a.user.id,"wootcount",0)-1):-1===b&&z(a.user.id,"mehcount",t(a.user.id,"mehcount",0)-1);1===a.vote?z(a.user.id,"wootcount",t(a.user.id,"wootcount",0)+1):-1===a.vote&&z(a.user.id,"mehcount",t(a.user.id,"mehcount",0)+1);z(a.user.id,"curVote",a.vote)}},v:function(a){var b=
API.getMedia();4===(this.settings.notify&4)&&n.chatLog(void 0,c.i18n("notify.message.curate",k.cleanTypedString(a.user.username),b.author,b.title),this.settings.colors.curate)},la:function(){this.settings.autowoot&&0>this.settings.registeredSongs.indexOf(API.getHistory()[0].media.id)&&P()},w:function(a){1===(this.settings.notify&1)&&n.chatLog(void 0,c.i18n("notify.message.join",k.cleanTypedString(a.username)),this.settings.colors.join);0===t(a.id,"joinTime",0)&&z(a.id,"joinTime",Date.now())},A:function(a){2===
(this.settings.notify&2)&&n.chatLog(void 0,c.i18n(0===a.relationship?"notify.message.leave.normal":1<a.relationship?"notify.message.leave.friend":"notify.message.leave.fan",k.cleanTypedString(a.username)),this.settings.colors.leave);var b=t(a.id,"disconnects",{count:0});b.count++;b.position=API.getDJ().id===a.id?-1:0>API.getWaitListPosition(a.id)?-2:API.getWaitListPosition(a.id);b.time=Date.now();z(a.id,"disconnects",b)},Q:function(a){var b="mention"==a.type&&API.hasPermission(a.fromID,API.ROLE.BOUNCER),
g=0>a.message.indexOf("@")&&(API.hasPermission(a.fromID,API.ROLE.HOST)||n.isPlugCubedDeveloper(a.fromID));(b||g)&&-1<a.message.indexOf("!afkdisable")&&(this.settings.autorespond?(this.settings.autorespond=!1,this.d("autorespond",this.settings.autorespond),this.f(),API.sendChat(c.i18n("autorespond.commandDisable","@"+a.from))):API.sendChat(c.i18n("autorespond.commandNotEnabled","@"+a.from)))},s:function(a){this.Q(a);if("mention"==a.type)this.settings.autorespond&&!this.settings.recent&&(this.settings.recent=
!0,b("#chat-input-field").attr("placeholder",c.i18n("autorespond.nextIn",this.k(Date.now()+18E4))),setTimeout(function(){b("#chat-input-field").attr("placeholder",c.i18n("autorespond.next"));plugCubed.settings.recent=!1;plugCubed.f()},18E4),API.sendChat("@"+a.from+" "+this.settings.awaymsg.split("@").join("")));else for(var e in this.settings.alertson)-1<a.message.indexOf(this.settings.alertson[e])&&D()},e:function(){v[1].D=!0},ma:function(a){if((API.hasPermission(void 0,API.ROLE.BOUNCER)||n.isPlugCubedDeveloper())&&
32===(plugCubed.settings.notify&32)){var b=-1,g;for(g in v){var e=v[g];if(e.id==a&&~~g+1<v.length&&(b=~~g+2,!e.D))return D(),setTimeout(function(){D()},50),API.chatLog(c.i18n("notify.message.history",b,v.length),!0)}if(0<b)return API.chatLog(c.i18n("notify.message.historySkipped",b,v.length),!0)}},k:function(a,b){b||(b="hh:mm");var c=a?new Date(a):new Date,e=c.getHours(),d=c.getMinutes(),c=c.getSeconds(),d=(10>d?"0":"")+d,c=(10>c?"0":"")+c;return b.split("hh").join((10>e?"0":"")+e).split("mm").join(d).split("ss").join(c)},
t:function(a){if(0===a.indexOf("/commands"))return X.print(),!0;if("/avail"==a||"/available"==a)return API.setStatus(0);if("/brb"==a||"/away"==a)return API.setStatus(1);if("/work"==a||"/working"==a)return API.setStatus(2);if("/game"==a||"/gaming"==a)return API.setStatus(3);if("/join"==a)return API.djJoin();if("/leave"==a)return API.djLeave();if("/whoami"==a)return F(API.getUser().id);if("/refresh"==a)return b("#refresh-button").click();if("/version"==a)return API.chatLog(c.i18n("running",C));if("/mute"==
a){if(0===API.getVolume())return;this.i=API.getVolume();return API.setVolume(0)}if("/link"==a)return API.sendChat("plugCubed : http://plugcubed.net");if("/unmute"==a)return 0<API.getVolume()?API.setVolume(this.i):!0;if("/nextsong"==a){a=API.getNextMedia();var h=-1;if(void 0===a)return API.chatLog(c.i18n("noNextSong"));a=a.media;for(var g in v){var p=v[g];if(p.id==a.id&&(h=~~g+1,!p.D))return API.chatLog(c.i18n("nextsong",a.title,a.author)),API.chatLog(c.i18n("isHistory",h,v.length),!0)}return API.chatLog(c.i18n("nextsong",
a.title,a.author))}if("/automute"==a){p=API.getMedia();if(void 0===p)return;0>this.settings.registeredSongs.indexOf(p.id)?(this.settings.registeredSongs.push(p.id),this.settings.autoMuted=!0,this.i=API.getVolume(),API.setVolume(0),API.chatLog(c.i18n("automute.registered",p.title))):(this.settings.registeredSongs.splice(this.settings.registeredSongs.indexOf(API.getMedia().id),1),this.settings.autoMuted=!1,API.setVolume(this.i),API.chatLog(c.i18n("automute.unregistered",p.title)));return this.f()}if(0===
a.indexOf("/getpos"))g=E(a.substr(8)),g=null===g?API.getUser():g,a=API.getWaitListPosition(g.id),API.getDJ().id===g.id?API.chatLog(c.i18n("info.userDjing",g.id===API.getUser().id?c.i18n("ranks.you"):k.cleanTypedString(g.username))):0===a?API.chatLog(c.i18n("info.userNextDJ",g.id===API.getUser().id?c.i18n("ranks.you"):k.cleanTypedString(g.username))):0<a?API.chatLog(c.i18n("info.inWaitlist",a+1,API.getWaitList().length)):API.chatLog(c.i18n("info.notInList"));else if("/curate"==a)for(h in p=JSON.parse(e.getItem("playlist")),
p){if(p[h].selected)return d.dispatch(new M(M.va,p[h].id)),!0}else{if(0===a.indexOf("/ignore ")||0===a.indexOf("/unignore "))return g=E(a.substr(0===a.indexOf("/ignore")?8:10)),null===g?(API.chatLog(c.i18n("error.userNotFound")),!0):g.id===API.getUser().id?(API.chatLog(c.i18n("error.ignoreSelf")),!0):-1<this.settings.ignore.indexOf(g.id)?(this.settings.ignore.splice(this.settings.ignore.indexOf(g.id),1),this.f(),API.chatLog(c.i18n("ignore.disabled",g.username)),!0):(this.settings.ignore.push(g.id),
this.f(),API.chatLog(c.i18n("ignore.enabled",k.cleanTypedString(g.username))));if(n.isPlugCubedDeveloper()&&0===a.indexOf("/whois "))return"/whois all"===a.toLowerCase()?O():F(a.substr(7));if(API.hasPermission(void 0,API.ROLE.AMBASSADOR)||n.isPlugCubedDeveloper()&&API.hasPermission(void 0,API.ROLE.MANAGER)){if(0===a.indexOf("/whois "))return"/whois all"===a.toLowerCase()?O():F(a.substr(7));if(0===a.indexOf("/banall")){if(9<a.length){var h=API.getUser(),f=API.getUsers();for(g in f)f[g].id!==h.id&&
API.moderateBanUser(f[g].id,a.substr(9).trim())}else API.chatLog(c.i18n("error.missingReason"));return}}if(API.hasPermission(void 0,API.ROLE.BOUNCER)){if(0===a.indexOf("/skip")){if(void 0===API.getDJ())return;5<a.length&&API.sendChat("@"+API.getDJ().username+" - Reason for skip: "+a.substr(5).trim());return API.moderateForceSkip()}if(0===a.indexOf("/whois "))return F(a.substr(7));if(0===a.indexOf("/add "))return this.V(a.substr(5),"adddj");if(0===a.indexOf("/remove "))return this.V(a.substr(8),"removedj")}if(API.hasPermission(void 0,
API.ROLE.MANAGER)){if("/lock"===a)return API.moderateLockWaitList(!0);if("/unlock"===a)return API.moderateLockWaitList(!1);"/lockskip"===a&&(p=API.getDJ().id,API.once(API.DJ_ADVANCE,function(){API.once(API.WAIT_LIST_UPDATE,function(){API.moderateMoveDJ(p,1)});API.moderateAddDJ(p)}),API.moderateForceSkip())}if(API.hasPermission(void 0,API.ROLE.HOST)||n.isPlugCubedDeveloper()){if(0===a.indexOf("/strobe")){if(s.readyState!==SockJS.OPEN)return API.chatLog(c.i18n("error.notConnected"),!0);g=a.split(" ");
-1<a.indexOf("off")?s.send(JSON.stringify({type:"rave",value:0})):1<g.length&&L(g[1])&&50<=~~g[1]&&100>=~~g[1]?s.send(JSON.stringify({type:"rave",value:~~g[1]})):s.send(JSON.stringify({type:"rave",value:1}))}if(0===a.indexOf("/rave")){if(s.readyState!==SockJS.OPEN)return API.chatLog(c.i18n("error.notConnected"),!0);-1<a.indexOf("off")?s.send(JSON.stringify({type:"rave",value:0})):s.send(JSON.stringify({type:"rave",value:2}))}}}}})}),define("plugCubed/dialogs/CustomChatColors",["jquery","c4161/e80a1/cf1e8",
"lang/Lang","c4161/e80a1/a11b0","plugCubed/Lang"],function(b,m,f,d,l){function e(e,f,k){return b('<div class="item">').addClass("p3-s-cc-"+e).append(b("<span>").text(f)).append(b("<span>").addClass("default").css("display",plugCubed.settings.colors[e]===k?"none":"block").mouseover(function(){d.trigger("tooltip:show",l.i18n("tooltip.reset"),b(this),!0)}).mouseout(function(){d.trigger("tooltip:hide")}).click(function(){b(this).parent().find("input").val(k);b(this).parent().find(".example").css("background-color",
"#"+k);b(this).css("display","none");plugCubed.settings.colors[e]=k;plugCubed.f();plugCubed.C()})).append(b("<span>").addClass("example").css("background-color","#"+plugCubed.settings.colors[e])).append(b("<input>").val(plugCubed.settings.colors[e]).keyup(function(){T(b(this).val())&&(b(this).parent().find(".example").css("background-color","#"+b(this).val()),plugCubed.settings.colors[e]=b(this).val(),plugCubed.f(),plugCubed.C());b(this).parent().find(".default").css("display",b(this).val()===k?"none":
"block")}))}var k;return new (m.extend({K:function(){if(void 0!==k)return"-270px"===k.css("left")?k.animate({left:b("#p3-settings").width()+1}):k.animate({left:-270});var d=b('<div class="container">').append(b('<div class="section">').text("User Ranks")),f;for(f in plugCubed.a.b)d.append(e(f,l.i18n(plugCubed.a.b[f].title),plugCubed.a.b[f].color));d.append(b('<div class="spacer">').append(b('<div class="divider">'))).append(b('<div class="section">').text(l.i18n("notify.header")));for(f in plugCubed.a.H)d.append(e(f,
l.i18n(plugCubed.a.H[f].title),plugCubed.a.H[f].color));k=b('<div id="p3-settings-custom-colors" style="left: -270px;">').append(b('<div class="header">').append(b('<div class="back">').append(b('<i class="icon icon-back"></i>')).click(function(){void 0!==k&&k.animate({left:-270})})).append(b('<div class="title">').append(b("<span>").text(l.i18n("menu.customchatcolors"))))).append(d).animate({left:b("#p3-settings").width()+1});b("body").append(k)},hide:function(){void 0!==k&&k.animate({left:-270})}}))}),
define("plugCubed/dialogs/Userinfo","jquery c4161/da043/ae072/d63c2 lang/Lang c4161/e80a1/cf1e8 c4161/e80a1/a11b0 c4161/a8590/d79ff plugCubed/Lang".split(" "),function(b,m,f,d,l,e,k){return d.extend({init:function(b){l.dispatch(new e(e.xa,new m.extend({id:"dialog-userinfo",className:"dialog",K:function(){return this.L.append(this.getHeader(k.i18n("info.header"))).append(this.ea().append(b)),this.aa()},submit:function(){this.close()}})))}})}),define("plugCubed/dialogs/Commands",["jquery","c4161/e80a1/cf1e8",
"lang/Lang","plugCubed/Lang","plugCubed/Utils"],function(b,m,f,d,l){var e=[["/nick","commands.descriptions.nick"],["/avail","commands.descriptions.avail"],["/afk","commands.descriptions.afk"],["/work","commands.descriptions.work"],["/gaming","commands.descriptions.gaming"],["/join","commands.descriptions.join"],["/leave","commands.descriptions.leave"],["/whoami","commands.descriptions.whoami"],["/mute","commands.descriptions.mute"],["/automute","commands.descriptions.automute"],["/unmute","commands.descriptions.unmute"],
["/nextsong","commands.descriptions.nextsong"],["/refresh","commands.descriptions.refresh"],["/ignore (commands.variables.username)","commands.descriptions.ignore"],["/alertson (commands.variables.word)","commands.descriptions.alertson"],["/curate","commands.descriptions.curate"],["/getpos","commands.descriptions.getpos"],["/version","commands.descriptions.version"],["/commands","commands.descriptions.commands"],["/link","commands.descriptions.link"]],k=[["/whois (commands.variables.username)","commands.descriptions.whois",
API.ROLE.BOUNCER],["/skip","commands.descriptions.skip",API.ROLE.BOUNCER],["/ban (commands.variables.username)","commands.descriptions.ban",API.ROLE.BOUNCER],["/lockskip","commands.descriptions.lockskip",API.ROLE.MANAGER],["/lock","commands.descriptions.lock",API.ROLE.MANAGER],["/unlock","commands.descriptions.unlock",API.ROLE.MANAGER],["/add (commands.variables.username)","commands.descriptions.add",API.ROLE.BOUNCER],["/remove (commands.variables.username)","commands.descriptions.remove",API.ROLE.BOUNCER],
["/strobe (commands.variables.onoff)","commands.descriptions.strobe",API.ROLE.HOST],["/rave (commands.variables.onoff)","commands.descriptions.rave",API.ROLE.HOST],["/whois all","commands.descriptions.whois",API.ROLE.AMBASSADOR],["/banall","commands.descriptions.banall",API.ROLE.AMBASSADOR]];return new (m.extend({print:function(){var b='<strong style="font-size:1.4em;">'+d.i18n("commands.header")+"</strong><br />",b=b+('<strong style="position:absolute;left: 5px;">=== '+d.i18n("commands.userCommands")+
" ===</strong><br />"),f;for(f in e){var q=e[f][0];1<q.split("(").length&&(q=q.split("(")[0]+"("+d.i18n(q.split("(")[1].split(")")[0])+")");b+='<span style="position:absolute;left: 20px;">'+q+'</span><br /><em style="position:absolute;left: 45px;">'+d.i18n(e[f][1])+"</em><br />"}if(API.hasPermission(void 0,API.ROLE.BOUNCER))for(f in b+='<br /><strong style="position:absolute;left: 5px;">=== '+d.i18n("commands.modCommands")+" ===</strong><br />",k)API.hasPermission(void 0,k[f][2])&&(q=k[f][0],1<q.split("(").length&&
(q=q.split("(")[0]+"("+d.i18n(q.split("(")[1].split(")")[0])+")"),b+='<span style="position:absolute;left: 20px;">'+q+'</span><br /><em style="position:absolute;left: 45px;">'+d.i18n(k[f][1])+"</em><br />");l.chatLog(void 0,b)}}))}),define("plugCubed/StyleManager",["jquery","c4161/e80a1/cf1e8"],function(b,m){function f(){var b="",f;for(f in l)b+=l[f];d.text(b)}var d,l={};return new (m.extend({init:function(){d=b('<style type="text/css">');b("head").append(d)},set:function(b,d){l[b]=d;f()},has:function(b){return void 0!==
l[b]},j:function(b){delete l[b]&&f()},ca:function(){l={};d.remove()}}))}),define("plugCubed/Utils",function(){return{isPlugCubedDeveloper:function(b){b||(b=API.getUser().id);return"50aeb31696fba52c3ca0adb6"==b},isPlugCubedSponsor:function(b){b||(b=API.getUser().id);return-1<["5121578196fba506408bb9eb"].indexOf(b)},isPlugCubedVIP:function(b){b||(b=API.getUser().id);return-1<["5112c273d6e4a94ec0554792","50b1961c96fba57db2230417","50aeb077877b9217e2fbff00","50aeb020d6e4a94f774740a9"].indexOf(b)},chatLog:function(b,
m,f){if(m){"string"!==typeof m&&(m=m.html());m=m.split("<script").join("");var d=$("#chat-messages"),l=d.scrollTop()>d[0].scrollHeight-d.height()-20,e=$("<div>").addClass(b?b:"update");m=$("<span>").addClass("text").html(m);"system"===b?e.append('<i class="icon icon-chat-system"></i>'):m.css("color","#"+(f?f:"d1d1d1"));d.append(e.append(m));l&&d.scrollTop(d[0].scrollHeight)}}}}),define("plugCubed/RoomUserListRow",["jquery","c4161/da043/d49a9/f13d3/ced58","plugCubed/Utils"],function(b,m,f){return m.extend({vote:function(){this.G.get("curated")||
0!==this.G.get("vote")?(this.c||(this.c=b("<i/>").addClass("icon")),this.L.append(this.c),this.G.get("curated")?this.c.removeClass().addClass("icon icon-curate"):1==this.G.get("vote")?this.c.removeClass().addClass("icon icon-woot"):(API.hasPermission(void 0,API.ROLE.BOUNCER)||f.isPlugCubedDeveloper())&&this.c.removeClass().addClass("icon icon-meh")):this.c&&(this.c.remove(),this.c=void 0)}})}),define("plugCubed/Lang",["jquery","c4161/e80a1/cf1e8"],function(b,m){var f={},d=!1;return new (m.extend({init:function(){var l=
this;b.getJSON("http://alpha.plugcubed.net/langs/lang.en.json",function(b){f=b;d=!0}).error(function(){setTimeout(function(){l.init()},500)})},load:function(l,e){if(!d){var k=this;return setTimeout(function(){k.load(l,e)},500)}l&&"en"!==l?b.getJSON("http://alpha.plugcubed.net/langs/lang."+l+".json",function(d){f=b.extend(!0,f,d);e&&e()}).error(function(){e&&e()}):e&&e()},i18n:function(b){var d=f,k;if(void 0===d)return"{"+b+"}";var p=b.split(".");for(k in p){if(void 0===d[p[k]])return"{"+b+"}";d=d[p[k]]}if(1<
arguments.length)for(k=1;k<arguments.length;k++)d=d.split("%"+k).join(arguments[k]);return d}}))}),define("plugCubed/Slider",["jquery","c4161/e80a1/cf1e8"],function(b,m){return m.extend({init:function(f,d,l,e){this.min=f?f:0;this.max=d?d:100;this.P=e;console.log("Slider with min",this.min,"max",this.max,"value",l);this.ua=b.proxy(this.oa,this);this.W=b.proxy(this.X,this);this.Z=b.proxy(this.pa,this);b.proxy(this.Ga,this);this.p=b('<div class="p3slider"><div class="line"></div><div class="circle"></div><div class="hit"></div></div>');
this.M=this.p.find(".line");this.h=this.p.find(".hit");this.g=this.p.find(".circle");this.h.mousedown(this.ua);this.g.css("left",parseInt(this.h.css("left"))+this.M.width()*(l/this.max)-this.g.width()/2);this.O=this.h.width()-this.g.width();return this},oa:function(f){this.$=this.h.offset().left;this.O=this.h.width()-this.g.width();b(document).on("mouseup",this.Z).on("mousemove",this.W);return this.X(f)},X:function(b){this.ka();b.preventDefault();b.stopPropagation();return!1},pa:function(f){b(document).off("mouseup",
this.Z).off("mousemove",this.W);f.preventDefault();f.stopPropagation();return!1},ka:function(){var b=Math.max(this.min,Math.min(this.max,~~((event.pageX-this.$)/this.O*this.max)));"function"===typeof this.P&&this.P(b);this.g.css("left",parseInt(this.h.css("left"))+this.M.width()*(b/this.max)-this.g.width()/2)}})}),define("plugCubed/Loader","jquery c4161/e80a1/cf1e8 plugCubed/Model c4161/b933e/fa706 c4161/da043/ae072/d63c2 plugCubed/Lang plugCubed/Utils".split(" "),function(b,m,f,d,l,e,k){e=d.getItem("plugCubedLang");
return null!==e&&"@@@"!==e?m.extend({init:function(){plugCubed=new f}}):l.extend({id:"plugCubedLang-panel",className:"dialog",K:function(){var d=this;console.log(d);this.l=[];b.getJSON("http://alpha.plugcubed.net/lang.json",function(f){d.l=f;this.L.append(this.getHeader("plug&#179; language")).append(this.ea().append(this.Ca(this.da())));_.defer(_.bind(this.za,this));b(".lang-button").click(b.proxy(this.na,this));return this.aa()}).done(function(){0===d.l.length&&k.chatLog(void 0,'<span style="color:#FF0000">Error loading plugCubed</span>')})},
da:function(){var d=this.l.length,f=b("<div/>");if(5<d)for(var e=0;e<d/5;e++)f.append(this.S(this.l.slice(5*e,5*e+5)).css("top",75*e));else f.append(this.S(this.l).css("top",75*e));return f},S:function(d){for(var e=b("<div/>").addClass("lang-row"),f=d.length,k=5==f?0:4==f?75:3==f?150:2==f?225:300,l=0;l<f;++l){var m=b("<div/>").addClass("lang-button").css("display","inline-block").css("left",k).data("language",d[l].file).css("cursor","pointer").append(b("<img/>").attr("src","http://alpha.plugcubed.net/flags/flag."+
d[l].file+".png").attr("alt",d[l].name).height(75).width(150));e.append(m);k+=150}return e},na:function(e){e=b(e.currentTarget);d.setItem("plugCubedLang",e.data("language"),!0);plugCubed=new f;this.close()}})}),require(["plugCubed/Model","plugCubed/Utils"],function(b){plugCubed=new b})):API.chatLog("This version of plug&#179; is not compatible with this version of plug.dj",!0);
