/*
 Copyright (C) 2012-2013 Thomas "TAT" Andresen and other contributors

 This program is free software: you can redistribute it and/or modify
 it under the terms of the GNU General Public License as published by
 the Free Software Foundation, either version 3 of the License, or
 (at your option) any later version.

 This program is distributed in the hope that it will be useful,
 but WITHOUT ANY WARRANTY; without even the implied warranty of
 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
 GNU General Public License for more details.

 You should have received a copy of the GNU General Public License
 along with this program.  If not, see <http://www.gnu.org/licenses/>.
*/
"undefined"!==typeof plugCubed&&plugCubed.close();function x(b){return!isNaN(parseInt(b,10))&&isFinite(b)}function I(b){return/^(#|)(([0-9A-F]{6}$)|([0-9A-F]{3}$))/i.test("#"===b.substr(0,1)?b:"#"+b)}Math.ra=function(){return 1+Math.floor(10*Math.random())};var plugCubed,T;
define("plugCubed/Model","jquery underscore f2428/ad16d/f1b69 f2428/ad16d/e4296 f2428/edc76/c5818 f2428/e236c/edda5 f2428/b4a20/bc3a6 f2428/c767c/cc12e f2428/a3a2b/c0125 f2428/f9894/c155f f2428/f9894/c56b1 f2428/c767c/aaf2e lang/Lang f2428/d82ae/dc84c/d60c4 f2428/a3a2b/ae041 f2428/a3a2b/d8fe8 plugCubed/StyleManager f2428/d82ae/dc84c/f68fe/a2ff8 f2428/d82ae/dc84c/f68fe/bc1ce plugCubed/RoomUserListRow plugCubed/Lang plugCubed/Utils f2428/e236c/fe0c8 f2428/c767c/f82e2 plugCubed/dialogs/CustomChatColors plugCubed/dialogs/Commands".split(" "),function(b,
m,h,f,e,d,n,k,J,U,V,ba,W,v,ca,da,y,ea,fa,ga,c,p,K,X,D,Y){function t(a,b,c){return void 0===T[a]||void 0===T[a][b]?c:T[a][b]}function w(a,b,c){void 0===T[a]&&(T[a]={});T[a][b]=c}function E(a){if(void 0!==a){F=!0;q={};r={};if(void 0!==a.colors){if(a.colors.background?y.set("rss-background-color","body { background-color: "+("#"!==a.colors.background.substr(0,1)?"#":"")+a.colors.background+"!important; }"):y.n("rss-background-color"),void 0!==a.colors.chat){var g={},c;for(c in a.colors.chat)-1<"admin ambassador bouncer cohost residentdj leader host manager volunteer".split(" ").indexOf(c)&&
I(a.colors.chat[c])&&(g[c]="#"===a.colors.chat[c].substr(0,1)?a.colors.chat[c].substr(1):a.colors.chat[c]);q=g}}else y.n("rss-background-color");void 0!==a.images?(v.defaultRoomElements(),void 0!==a.images.O?b("#room-wheel").css("display",a.images.O.ua&&"false"===a.images.O.ua?"none":""):b("#room-wheel").css("display",""),f.trigger("audience:redraw"),a.images.background?y.set("rss-background-image",'body { background-image: url("'+a.images.background+'")!important; }'):y.n("rss-background-image"),
b("#p3-dj-booth").remove(),void 0!==a.images.P&&b("#dj-booth").append(b('<div id="p3-dj-booth">').css("background-image",'url("'+a.images.P.P+'")')),r=a.images.Ha):(v.defaultRoomElements(),b("#room-wheel").css("display",""),y.n("rss-background-image"),y.n("rss-booth"),f.trigger("audience:redraw"));plugCubed.B()}}function L(){var a=k.get("description"),g=plugCubed.settings.useRoomSettings[window.location.pathname.split("/")[1]];if(null!==a&&-1<a.indexOf("@p3=")){a=a.substr(a.indexOf("@p3=")+4);if(void 0===
g||!0===g)return b.getJSON(a,function(a){E(a)});F=!0;plugCubed.Ja()}}function B(a){a=a.trim();"@"===a.substr(0,1)&&(a=a.substr(1));var b=API.getUsers(),c;for(c in b)if(("string"!==typeof a?0:b[c].username.toLowerCase()===a.toLowerCase())||("string"!==typeof a?0:b[c].id.toLowerCase()===a.toLowerCase()))return b[c];return null}function C(a){a=B(a);if(null===a)API.chatLog(c.i18n("error.userNotFound"));else{var b,d,l,k,f=a.ba+a.$+a.ga;d=API.getWaitListPosition(a.id);var h=API.getDJ().id===a.id;l=a.language;
k=e.Ra.concat(e.Da);for(b in k)k.value===l&&(l=k[b].label);b=API.hasPermission(a.id,API.ROLE.ADMIN)?c.i18n("ranks.admin"):API.hasPermission(a.id,API.ROLE.AMBASSADOR)?c.i18n("ranks.ambassador"):API.hasPermission(a.id,API.ROLE.HOST)?c.i18n("ranks.host"):API.hasPermission(a.id,API.ROLE.COHOST)?c.i18n("ranks.cohost"):API.hasPermission(a.id,API.ROLE.MANAGER)?c.i18n("ranks.manager"):API.hasPermission(a.id,API.ROLE.BOUNCER)?c.i18n("ranks.bouncer"):API.hasPermission(a.id,API.ROLE.RESIDENTDJ)?c.i18n("ranks.residentdj"):
c.i18n("ranks.regular");k=h?c.i18n("info.djing"):-1<d?c.i18n("info.inwaitlist",d+1,API.getWaitList().length):c.i18n("info.notinlist");switch(a.status){default:d=c.i18n("status.available");break;case API.STATUS.AFK:d=c.i18n("status.afk");break;case API.STATUS.WORKING:d=c.i18n("status.working");break;case API.STATUS.za:d=c.i18n("status.sleeping")}switch(a.vote){case -1:l=c.i18n("vote.meh");break;default:l=c.i18n("vote.undecided");break;case 1:l=c.i18n("vote.woot")}h&&(l=c.i18n("vote.djing"));h=void 0;
p.isPlugCubedDeveloper(a.id)&&(h=c.i18n("info.specialTitles.developer"));p.isPlugCubedSponsor(a.id)&&(h=c.i18n("info.specialTitles.sponsor"));p.isPlugCubedVIP(a.id)&&(h=c.i18n("info.specialTitles.vip"));p.appendChatMessage('<table style="width:100%;color:#CC00CC"><tr><td colspan="2"><strong>'+c.i18n("info.name")+'</strong>: <span style="color:#FFFFFF">'+n.cleanTypedString(a.username)+"</span></td></tr>"+(h?'<tr><td colspan="2"><strong>'+c.i18n("info.title")+'</strong>: <span style="color:#FFFFFF">'+
h+"</span></td></tr>":"")+'<tr><td colspan="2"><strong>'+c.i18n("info.id")+'</strong>: <span style="color:#FFFFFF">'+a.id+"</span></td></tr><tr><td><strong> "+c.i18n("info.rank")+'</strong>: <span style="color:#FFFFFF">'+b+"</span></td><td><strong>"+c.i18n("info.joined")+'</strong>: <span style="color:#FFFFFF">'+plugCubed.D(t(a.id,"joinTime",Date.now()))+"</span></td></tr><tr><td><strong>"+c.i18n("info.status")+'</strong>: <span style="color:#FFFFFF">'+d+"</span></td><td><strong> "+c.i18n("info.vote")+
'</strong>: <span style="color:#FFFFFF">'+l+'</span></td></tr><tr><td colspan="2"><strong>'+c.i18n("info.position")+'</strong>: <span style="color:#FFFFFF">'+k+"</span></td></tr><tr><td><strong>"+c.i18n("info.points")+'</strong>: <span style="color:#FFFFFF" title = "'+c.i18n("info.pointType.dj",a.ba)+"&#13; "+c.i18n("info.pointType.listener",a.ga)+"&#13; "+c.i18n("info.pointType.curator",a.$)+'">'+f+"</span></td><td><strong> "+c.i18n("info.fans")+'</strong>: <span style="color:#FFFFFF">'+a.Fa+"</span></td></tr><tr><td><strong>"+
c.i18n("info.wootCount")+'</strong>: <span style="color:#FFFFFF">'+t(a.id,"wootcount",0)+"</span></td><td><strong>"+c.i18n("info.mehCount")+'</strong>: <span style="color:#FFFFFF">'+t(a.id,"mehcount",0)+'</span></td></tr><tr><td colspan="2"><strong>'+c.i18n("info.ratio")+'</strong>: <span style="color:#FFFFFF">'+function(a,b){if(0===b)return 0===a?"0:0":"1:0";for(var c=1;c<=b;c++){var g=a/b*c;if(0===g%1)return g+":"+c}}(t(a.id,"wootcount",0),t(a.id,"mehcount",0))+'</span></td></tr><tr><td><strong>Disconnects</strong>: <span style="color:#FFFFFF">'+
t(a.id,"disconnects",0)+"</td></tr></table>")}}function M(){var a=b('<table style="width:100%;color:#CC00CC"/>'),c=API.getUsers(),d;for(d in c)a.append(b("<tr/>").append(b("<td/>").append(c[d].username)).append(b("<td/>").append(c[d].id)));p.appendChatMessage(b("<div/>").append(a).html())}function G(){document.getElementById("chat-sound").Pa()}function N(){if(0!==API.getWaitList().length){var a=API.getWaitList()[0];null!==a&&a!=API.getUser()&&b("#woot").click()}}function O(){b("#dj-booth").append(b("<div />").addClass("afkTimer").css("left",
22))}function P(){b("#dj-booth .afkTimer").remove()}function Z(){var a=API.getWaitList(),c=b("#dj-booth .afkTimer");1>a.length?c.text(""):(a=Date.now()-t(a[0].id,"lastChat",t(a[0].id,"joinTime",Date.now())),c.text(plugCubed.D(a,36E5>a?"mm:ss":"hh:mm:ss")))}function Q(a){if(a.from&&a.from.id){if("mention"===a.type){a.type+=" is-";API.hasPermission(a.from.id,API.ROLE.ADMIN)?a.type+="admin":API.hasPermission(a.from.id,API.ROLE.Aa)?a.type+="ambassador":API.hasPermission(a.from.id,API.ROLE.BOUNCER)?a.type+=
"staff":API.hasPermission(a.from.id,API.ROLE.xa)?a.type+="dj":a.type+="you";var b=RegExp("@"+API.getUser().username,"g");a.text=a.text.replace(b,'<span class="name">@'+API.getUser().username+"</span>")}a.type+=" from";if(API.hasPermission(a.from.id,API.ROLE.RESIDENTDJ)||a.from.id==API.getUser().id)a.type+="-";API.hasPermission(a.from.id,API.ROLE.ADMIN)?a.type+="admin":API.hasPermission(a.from.id,API.ROLE.AMBASSADOR)?a.type+="ambassador":API.hasPermission(a.from.id,API.ROLE.HOST)?a.type+="host":API.hasPermission(a.from.id,
API.ROLE.COHOST)?a.type+="cohost":API.hasPermission(a.from.id,API.ROLE.MANAGER)?a.type+="manager":API.hasPermission(a.from.id,API.ROLE.BOUNCER)?a.type+="bouncer":API.hasPermission(a.from.id,API.ROLE.RESIDENTDJ)?a.type+="residentdj":a.from.id==API.getUser().id&&(a.type+="you")}}function aa(){R=setInterval(Z,1E3);this.colors={Sa:"66FFFF",La:"FF0000",ea:"FFFF00",Ia:"66FFFF"};this.R=c.i18n("AFK.default");setTimeout(function(){u=[];var a=API.getHistory(),b;for(b in a){var c=a[b];u.push({id:c.media.id,
author:c.media.author,title:c.media.title,C:!1,dj:{id:c.user.id.toString(),username:c.user.username}})}},1);this.p=b('<style type="text/css" />');b("head").append(this.p);p.appendChatMessage(c.i18n("running",A)+'</span><br /><span class="chat-text" style="color:#66FFFF">'+c.i18n("commandsHelp"),"FFFF00");window.addEventListener("pushState",this.proxy.l);b("body").prepend('<link rel="stylesheet" type="text/css" id="plugcubed-css" href="http://alpha.plugcubed.net/plugCubed.css?='+Date.now()+'" />');
b("#plug-dj").after(S);S.click(this.proxy.I);b("#room-bar").css("left",108);this.ha();this.fa();var a=API.getUsers(),g;for(g in a)0>t(a[g].id,"joinTime",-1)&&w(a[g].id,"joinTime",Date.now());b("#chat-header").append(b("<div>").addClass("chat-header-button p3-s-stream").data("key","stream").click(this.proxy.k).mouseover(function(){f.trigger("tooltip:show",c.i18n("menu.stream"),b(this),!0)}).mouseout(function(){f.trigger("tooltip:hide")})).append(b("<div>").addClass("chat-header-button p3-s-clear").data("key",
"clear").click(this.proxy.k).mouseover(function(){f.trigger("tooltip:show",c.i18n("menu.clear"),b(this),!0)}).mouseout(function(){f.trigger("tooltip:hide")}));f.on("chat:receive",Q);f._events["chat:receive"].unshift(f._events["chat:receive"].pop());this.N();this.loaded=!0;L();b("#footer-links").append(b("<div />").addClass("footer").addClass("plugcubed-footer").css("top",12).html(c.i18n("running",A)+c.i18n("footer.seperator")).append(b("<span />").addClass("plugcubed-status").text(c.i18n("footer.socket",
c.i18n("footer.unknown")))))}V.sio.$events.chat=U.listener.chat=function(a){if("undefined"!==typeof plugCubed&&(a.fromID&&w(a.fromID,"lastChat",Date.now()),-1<plugCubed.settings.ignore.indexOf(a.fromID))){plugCubed.Q(a);return}e.receive(a);API.dispatch(API.CHAT,a)};var H={},R,A={ia:3,ja:0,qa:0,J:"alpha.11",F:!1,toString:function(){return this.ia+"."+this.ja+"."+this.qa+(void 0!==this.J&&""!==this.J?"-"+this.J:"")+(this.F?"_min":"")}},u=[],s,F=!1,q={},r={},S=b('<div id="plug-cubed"><i class="icon icon-plug-cubed"></i></div>'),
z;return h.extend({init:function(){"undefined"===typeof T&&(T={});this.proxy={r:b.proxy(this.r,this),k:b.proxy(this.k,this),s:b.proxy(this.s,this),w:b.proxy(this.w,this),t:b.proxy(this.t,this),u:b.proxy(this.u,this),v:b.proxy(this.v,this),q:b.proxy(this.q,this),f:b.proxy(this.f,this),l:b.proxy(this.l,this),I:b.proxy(this.I,this)};c.load(d.getItem("plugCubedLang"),b.proxy(aa,this))},l:function(){"undefined"!==typeof plugCubed&&setTimeout(function(){API.enabled?b.getScript("http://alpha.plugcubed.net/plugCubed."+
(A.F?"min.":"")+"js?="+Date.now()):plugCubed.l()},500)},close:function(){if(void 0!==this.loaded&&!1!==this.loaded){clearInterval(R);P();E({});window.removeEventListener("pushState",plugCubed.proxy.l);API.off(API.CHAT_COMMAND,this.proxy.r);API.off(API.DJ_ADVANCE,this.proxy.s);API.off(API.VOTE_UPDATE,this.proxy.w);API.off(API.CURATE_UPDATE,this.proxy.t);API.off(API.USER_JOIN,this.proxy.u);API.off(API.USER_LEAVE,this.proxy.v);API.off(API.CHAT,this.proxy.q);API.off(API.VOTE_SKIP,this.proxy.f);API.off(API.USER_SKIP,
this.proxy.f);API.off(API.MOD_SKIP,this.proxy.f);f.off("chat:receive",Q);for(var a in H)void 0!==a&&void 0!==H[a]&&(b("#plugcubed-btn-"+a).unbind(),delete H[a]);b("#plugcubed-css,#font-awesome,#plugcubed-js-extra,#side-right,#side-left,#notify-dialog,.plugcubed-footer,#plug-cubed,#p3-settings,#p3-settings-custom-colors,.p3-s-stream,.p3-s-clear").remove();b("#room-bar").css("left",54);this.p&&this.p.remove();s&&(s.onclose=function(){console.log("[plug³ Socket Server]","Closed")},s.close());requirejs.undef("plugCubed/Model");
requirejs.undef("plugCubed/dialogs/Notify");requirejs.undef("plugCubed/dialogs/CustomChatColors");requirejs.undef("plugCubed/dialogs/Commands");requirejs.undef("plugCubed/Lang");requirejs.undef("plugCubed/MenuView");requirejs.undef("plugCubed/Loader");requirejs.undef("plugCubed/RoomUserListRow");y.aa();requirejs.undef("plugCubed/StyleManager");this.loaded=!1;delete plugCubed}},N:function(){if(void 0===s||s.readyState!==SockJS.OPEN)s=new SockJS("http://socket.plugcubed.net/gateway"),s.m=0,console.log("[plug³ Socket Server]",
this.X?"Reconnecting":"Connecting"),s.onopen=function(){this.m=0;console.log("[plug³ Socket Server]",this.X?"Reconnected":"Connected");var a=API.getUser();this.send(JSON.stringify({type:"userdata",id:a.id,username:a.username,room:k.get("id"),version:A.toString()}));b(".plugcubed-status").text(c.i18n("footer.socket",c.i18n("footer.online")))},s.onmessage=function(a){var g=JSON.parse(a.data);a=g.type;g=g.data;if("update"===a)return this.onclose=function(){},this.close(),API.chatLog(c.i18n("newVersion"),
null,plugCubed.colors.ea),setTimeout(function(){b.getScript("http://alpha.plugcubed.net/plugCubed."+(A.F?"min.":"")+"js")},5E3);if("chat"===a){if(!g.chatID||0<b(".chat-id-"+g.chatID).length||-1<plugCubed.settings.ignore.indexOf(g.fromID))return;e.receive(g);return API.trigger(API.CHAT,g)}if("rave"===a&&(p.isPlugCubedDeveloper(g.id)||p.isPlugCubedSponsor(g.id)||API.hasPermission(g.id,API.ROLE.HOST))){switch(g.value){case 0:return clearTimeout(v.strobeTimeoutID),v.lightsOut(!1);case 1:return v.strobeOnSpeed=
50,v.strobeOffSpeed=160,v.strobeSwap();case 2:return v.lightsOut(!0)}if(50<=g.value&&100>=g.value)return v.strobeOnSpeed=g.value,v.strobeOffSpeed=3.2*g.value,v.strobeSwap()}},s.onclose=function(){console.log("[plug³ Socket Server]","Closed");this.m++;this.X=!0;var a;if(5>this.m)a=5;else if(30>this.m)a=30;else if(60>this.m)a=60;else return;setTimeout(function(){plugCubed.N()},1E3*a);b(".plugcubed-status").text(c.i18n("footer.socket",c.i18n("footer.offline")))}},a:{b:{you:{title:"ranks.you",color:"FFDD6F"},
regular:{title:"ranks.regular",color:"B0B0B0"},d:{title:"ranks.residentdj",color:"E90E82"},bouncer:{title:"ranks.bouncer",color:"E90E82"},manager:{title:"ranks.manager",color:"E90E82"},cohost:{title:"ranks.cohost",color:"E90E82"},host:{title:"ranks.host",color:"E90E82"},ambassador:{title:"ranks.ambassador",color:"9A50FF"},admin:{title:"ranks.admin",color:"42A5DC"}},H:{join:{title:"notify.join",color:"3366FF"},leave:{title:"notify.leave",color:"3366FF"},curate:{title:"notify.curate",color:"00FF00"},
stats:{title:"notify.stats",color:"66FFFF"},updates:{title:"notify.updates",color:"FFFF00"}}},settings:{recent:!1,awaymsg:"",autowoot:!1,autorespond:!1,notify:0,customColors:!1,avatarAnimations:!0,registeredSongs:[],ignore:[],alertson:[],autoMuted:!1,afkTimers:!1,useRoomSettings:{},colors:{you:"FFDD6F",regular:"B0B0B0",d:"E90E82",bouncer:"E90E82",manager:"E90E82",cohost:"E90E82",host:"E90E82",ambassador:"9A50FF",admin:"42A5DC",join:"3366FF",leave:"3366FF",curate:"00FF00",stats:"66FFFF",updates:"FFFF00"}},
ha:function(){try{var a=JSON.parse(d.getItem("plugCubed")),b;for(b in this.settings)void 0!==a[b]&&(this.settings[b]=a[b]);this.settings.recent=!1;this.settings.afkTimers&&O();this.settings.autowoot&&N();this.B();63<this.settings.notify&&(this.settings.notify=0);0<this.settings.registeredSongs.length&&-1<this.settings.registeredSongs.indexOf(API.getMedia().id)&&(API.setVolume(0),this.settings.autoMuted=!0,API.chatLog(c.i18n("automuted",API.getMedia().title)))}catch(k){}},g:function(){d.setItem("plugCubed",
JSON.stringify(this.settings))},B:function(){var a=[],b=this.settings.useRoomSettings[window.location.pathname.split("/")[1]];((b=void 0===b||!0===b?!0:!1)&&q.regular||this.settings.colors.regular!==this.a.b.regular.color)&&a.push(".message.from > .from,",".emote.from > .from,",".mention.from > .from { color:#"+(this.settings.colors.regular!==this.a.b.regular.color?this.settings.colors.regular:q.regular)+"!important; }");(b&&q.d||this.settings.colors.d!==this.a.b.d.color)&&a.push(".message.from-residentdj > .from,",
".emote.from-residentdj > .from,",".mention.from-residentdj > .from { color:#"+(this.settings.colors.d!==this.a.b.d.color?this.settings.colors.d:q.d)+"!important; }");(b&&q.bouncer||this.settings.colors.bouncer!==this.a.b.bouncer.color)&&a.push(".message.from-bouncer > .from,",".emote.from-bouncer > .from,",".mention.from-bouncer > .from { color:#"+(this.settings.colors.bouncer!==this.a.b.bouncer.color?this.settings.colors.bouncer:q.bouncer)+"!important; }");(b&&q.manager||this.settings.colors.manager!==
this.a.b.manager.color)&&a.push(".message.from-manager > .from,",".emote.from-manager > .from,",".mention.from-manager > .from { color:#"+(this.settings.colors.manager!==this.a.b.manager.color?this.settings.colors.manager:q.manager)+"!important; }");(b&&q.cohost||this.settings.colors.cohost!==this.a.b.cohost.color)&&a.push(".message.from-cohost > .from,",".emote.from-cohost > .from,",".mention.from-cohost > .from { color:#"+(this.settings.colors.cohost!==this.a.b.cohost.color?this.settings.colors.cohost:
q.cohost)+"!important; }");(b&&q.host||this.settings.colors.host!==this.a.b.host.color)&&a.push(".message.from-host > .from,",".emote.from-host > .from,",".mention.from-host > .from { color:#"+(this.settings.colors.host!==this.a.b.host.color?this.settings.colors.host:q.host)+"!important; }");(b&&q.ambassador||this.settings.colors.ambassador!==this.a.b.ambassador.color)&&a.push(".message.from-ambassador > .from,",".emote.from-ambassador > .from,",".mention.from-ambassador > .from { color:#"+(this.settings.colors.ambassador!==
this.a.b.ambassador.color?this.settings.colors.ambassador:q.ambassador)+"!important; }");(b&&q.admin||this.settings.colors.admin!==this.a.b.admin.color)&&a.push(".message.from-admin > .from,",".emote.from-admin > .from,",".mention.from-admin > .from { color:#"+(this.settings.colors.admin!==this.a.b.admin.color?this.settings.colors.admin:q.admin)+"!important; }");(b&&q.you||this.settings.colors.you!==this.a.b.you.color)&&a.push(".message.from-you > .from,",".emote.from-you > .from,",".mention.from-you > .from { color:#"+
(this.settings.colors.you!==this.a.b.you.color?this.settings.colors.you:q.you)+"!important; }");b&&r&&(r.admin&&a.push(".message.from-admin > .icon,",".emote.from-admin > .icon,",'.mention.from-admin > .icon { background-image: url("'+r.admin+'"); background-position: 0 0; }'),r.ambassador&&a.push(".message.from-ambassador > .icon,",".emote.from-ambassador > .icon,",'.mention.from-ambassador > .icon { background-image: url("'+r.ambassador+'"); background-position: 0 0; }'),r.bouncer&&a.push(".message.from-bouncer > .icon,",
".emote.from-bouncer > .icon,",'.mention.from-bouncer > .icon { background-image: url("'+r.bouncer+'"); background-position: 0 0; }'),r.cohost&&a.push(".message.from-cohost > .icon,",".emote.from-cohost > .icon,",'.mention.from-cohost > .icon { background-image: url("'+r.cohost+'"); background-position: 0 0; }'),r.d&&a.push(".message.from-residentdj > .icon,",".emote.from-residentdj > .icon,",'.mention.from-residentdj > .icon { background-image: url("'+r.d+'"); background-position: 0 0; }'),r.host&&
a.push(".message.from-host > .icon,",".emote.from-host > .icon,",'.mention.from-host > .icon { background-image: url("'+r.host+'"); background-position: 0 0; }'),r.manager&&a.push(".message.from-manager > .icon,",".emote.from-manager > .icon,",'.mention.from-manager > .icon { background-image: url("'+r.manager+'"); background-position: 0 0; }'));this.p.text(a.join("\n"))},fa:function(){API.on(API.CHAT_COMMAND,this.proxy.r);API.on(API.DJ_ADVANCE,this.proxy.s);API.on(API.VOTE_UPDATE,this.proxy.w);API.on(API.CURATE_UPDATE,
this.proxy.t);API.on(API.USER_JOIN,this.proxy.u);API.on(API.USER_LEAVE,this.proxy.v);API.on(API.CHAT,this.proxy.q);API.on(API.VOTE_SKIP,this.proxy.f);API.on(API.USER_SKIP,this.proxy.f);API.on(API.MOD_SKIP,this.proxy.f)},c:function(a,c,d){return b('<div class="item">').addClass("p3-s-"+c+(a?" selected":"")).append(b('<i class="icon icon-check-blue"></i>')).append(b("<span>").text(d)).data("key",c).click(this.proxy.k)},h:function(a,c){b(".p3-s-"+a).removeClass("selected");c&&b(".p3-s-"+a).addClass("selected")},
W:function(a,b){if(API.hasPermission(void 0,API.ROLE.BOUNCER)){var d;switch(b){case "removedj":d=API.moderateRemoveDJ;break;case "adddj":d=API.moderateAddDJ;break;default:API.chatLog(c.i18n("error.unknownModeration"));return}var k=B(a);null===k?API.chatLog(c.i18n("error.userNotFound")):d(k.id," ")}},I:function(){if(void 0!==z)return"0px"===z.css("left")?(z.animate({left:-270}),D.hide()):z.animate({left:0});z=b('<div id="p3-settings" style="left: -270px;">').append(b('<div class="header">').append(b('<div class="back">').append(b('<i class="icon icon-back"></i>')).click(function(){void 0!==
z&&z.animate({left:-270});D.hide()})).append(b('<div class="title">').append(b('<i class="icon icon-settings"></i>')).append(b("<span>plug&#179;</span>")).append(b("<span>").addClass("version").text(A)))).append(b('<div class="container">').append(b('<div class="section">Features</div>')).append(this.c(this.settings.autowoot,"woot",c.i18n("menu.autowoot"))).append(this.c(this.settings.autorespond,"autorespond",c.i18n("menu.autorespond"))).append(b('<div class="item">').addClass("p3-s-autorespond-input").append(b("<input>").val(""===
plugCubed.settings.awaymsg?this.R:plugCubed.settings.awaymsg).keyup(function(){b(this).val(b(this).val().split("@").join(""));plugCubed.settings.awaymsg=b(this).val().trim()})).mouseover(function(){f.trigger("tooltip:show","AFK Message",b(this),!0)}).mouseout(function(){f.trigger("tooltip:hide")})).append(API.hasPermission(void 0,API.ROLE.BOUNCER)?this.c(this.settings.afkTimers,"afktimers",c.i18n("menu.afktimers")):"").append(F?this.c(void 0!==this.settings.useRoomSettings[window.location.pathname.split("/")[1]]?
this.settings.useRoomSettings[window.location.pathname.split("/")[1]]:!0,"roomsettings",c.i18n("menu.roomsettings")):"").append(this.c(!1,"colors",c.i18n("menu.customchatcolors")+"...")).append(b('<div class="spacer">').append(b('<div class="divider">'))).append(b('<div class="section">'+c.i18n("notify.header")+"</div>")).append(this.c(1===(this.settings.notify&1),"notify-join",c.i18n("notify.join")).data("bit",1)).append(this.c(2===(this.settings.notify&2),"notify-leave",c.i18n("notify.leave")).data("bit",
2)).append(this.c(4===(this.settings.notify&4),"notify-curate",c.i18n("notify.curate")).data("bit",4)).append(this.c(8===(this.settings.notify&8),"notify-stats",c.i18n("notify.stats")).data("bit",8)).append(this.c(16===(this.settings.notify&16),"notify-updates",c.i18n("notify.updates")).data("bit",16)).append(API.hasPermission(void 0,API.ROLE.BOUNCER)||p.isPlugCubedDeveloper()?this.c(32===(this.settings.notify&32),"notify-history",c.i18n("notify.history")).data("bit",32).data("perm",API.ROLE.BOUNCER):
"")).animate({left:0});b("body").append(z)},k:function(a){a=b(a.currentTarget).data("key");switch(a){case "woot":this.settings.autowoot=!this.settings.autowoot;this.h("woot",this.settings.autowoot);this.settings.autowoot&&b("#woot").click();break;case "colors":D.A();break;case "autorespond":this.settings.autorespond=!this.settings.autorespond;this.h("autorespond",this.settings.autorespond);this.settings.autorespond?(""===this.settings.awaymsg.trim()&&(this.settings.awaymsg=this.R),b("#chat-input-field").attr("disabled",
"disabled").attr("placeholder","Disable AFK Autorespond to chat"),0>=API.getUser().status&&API.setStatus(API.STATUS.AFK)):(b("#chat-input-field").removeAttr("disabled").attr("placeholder",W.chat.placeholder),API.setStatus(API.STATUS.AVAILABLE));break;case "notify-join":case "notify-leave":case "notify-curate":case "notify-stats":case "notify-updates":case "notify-history":if(!b(".p3-s-"+a).data("perm")||API.hasPermission(void 0,b(".p3-s-"+a).data("perm"))||p.isPlugCubedDeveloper()){var g=b(".p3-s-"+
a).data("bit");this.settings.notify+=(this.settings.notify&g)===g?-g:g;this.h(a,(this.settings.notify&g)===g);f.trigger("notify","icon-chat-system",[c.i18n(a.split("-").join(".")),c.i18n("notify.header"),(this.settings.notify&g)===g?"enabled":"disabled"].join(" "))}break;case "stream":X.set("streamDisabled",!K.settings.ta);this.h("stream",K.settings.ta);return;case "clear":e.clear();return;case "roomsettings":a=this.settings.useRoomSettings[window.location.pathname.split("/")[1]];a=void 0===a||!0===
a?!1:!0;this.settings.useRoomSettings[window.location.pathname.split("/")[1]]=a;(a?L:E)({});this.h("roomsettings",a);break;case "afktimers":this.settings.afkTimers=!this.settings.afkTimers;this.h("afktimers",this.settings.afkTimers);(this.settings.afkTimers?O:P)();break;default:return API.chatLog(c.i18n("error.unknownMenuKey",a))}this.g()},Na:function(){for(var a in this.settings.colors){var c=b('input[name="'+a+'"]');c.val(c.data("ph"));c.parents(".dialog-input-container").find(".dialog-input-label").css("color",
"#"+c.val())}},s:function(a){8===(this.settings.notify&8)&&p.appendChatMessage(c.i18n("notify.message.stats",a.V.Y.Qa,a.V.Y.Ma,a.V.Y.Ea),this.settings.colors.stats);16===(this.settings.notify&16)&&p.appendChatMessage(c.i18n("notify.message.updates",a.media.title,a.media.author,n.cleanTypedString(a.dj.username)),this.settings.colors.updates);setTimeout(b.proxy(this.la,this),1E3*Math.ra());this.na(a.media.id);50<u.unshift({id:a.media.id,author:a.media.author,title:a.media.title,C:!1,user:{id:a.dj.id,
username:a.dj.username}})&&u.splice(50,u.length-50);this.settings.autoMuted&&0>this.settings.registeredSongs.indexOf(a.media.id)&&(setTimeout(function(){API.setVolume(plugCubed.j)},800),this.settings.autoMuted=!1);!this.settings.autoMuted&&-1<this.settings.registeredSongs.indexOf(a.media.id)&&(setTimeout(function(){API.setVolume(0)},800),this.settings.autoMuted=!0,this.j=API.getVolume(),API.chatLog(i18n("automuted",a.media.title)));a=API.getUsers();for(var d in a)w(a[d].id,"curVote",0)},w:function(a){if(a&&
a.user){var b=t(a.user.id,"curVote",0);1===b?w(a.user.id,"wootcount",t(a.user.id,"wootcount",0)-1):-1===b&&w(a.user.id,"mehcount",t(a.user.id,"mehcount",0)-1);1===a.vote?w(a.user.id,"wootcount",t(a.user.id,"wootcount",0)+1):-1===a.vote&&w(a.user.id,"mehcount",t(a.user.id,"mehcount",0)+1);w(a.user.id,"curVote",a.vote)}},t:function(a){var b=API.getMedia();4===(this.settings.notify&4)&&p.appendChatMessage(c.i18n("notify.message.curate",n.cleanTypedString(a.user.username),b.author,b.title),this.settings.colors.curate)},
la:function(){this.settings.autowoot&&0>this.settings.registeredSongs.indexOf(API.getHistory()[0].media.id)&&N()},u:function(a){1===(this.settings.notify&1)&&p.appendChatMessage(c.i18n("notify.message.join",n.cleanTypedString(a.username)),this.settings.colors.join);0===t(a.id,"joinTime",0)&&w(a.id,"joinTime",Date.now())},v:function(a){2===(this.settings.notify&2)&&p.appendChatMessage(c.i18n(0===a.sa?"notify.message.leave.normal":1<a.sa?"notify.message.leave.friend":"notify.message.leave.fan",n.cleanTypedString(a.username)),
this.settings.colors.leave);w(a.id,"disconnects",t(a.id,"disconnects",0)+1);w(a.id,"lastDisconnect",Date.now())},Q:function(a){var b="mention"==a.type&&API.hasPermission(a.fromID,API.ROLE.BOUNCER),c=0>a.message.indexOf("@")&&(API.hasPermission(a.fromID,API.ROLE.HOST)||p.isPlugCubedDeveloper(a.fromID));(b||c)&&-1<a.message.indexOf("!afkdisable")&&(this.settings.autorespond?(this.settings.autorespond=!1,this.h("autorespond",this.settings.autorespond),this.g(),API.sendChat("@"+a.from+" AFK message disabled")):
API.sendChat("@"+a.from+" AFK message was not enabled"))},q:function(a){this.Q(a);if("mention"==a.type)this.settings.autorespond&&!this.settings.recent&&(this.settings.recent=!0,b("#chat-input-field").attr("placeholder","Next AFK Autorespond will be sent from "+this.D(Date.now()+18E4)),setTimeout(function(){b("#chat-input-field").attr("placeholder","AFK Autorespond on next mention");plugCubed.settings.recent=!1;plugCubed.g()},18E4),API.sendChat("@"+a.from+" "+this.settings.awaymsg));else for(var c in this.settings.alertson)-1<
a.message.indexOf(this.settings.alertson[c])&&G()},f:function(){u[1].C=!0},Oa:function(){setTimeout(function(){console.log("Waitlist Show");b("#waitlist .list .user").each(function(){b(this).find(".meta").append(b("<span>").addClass("afk"))})},1)},na:function(a){if((API.hasPermission(void 0,API.ROLE.BOUNCER)||p.isPlugCubedDeveloper())&&32===(plugCubed.settings.notify&32)){var b=-1,d;for(d in u){var k=u[d];if(k.id==a&&~~d+1<u.length&&(b=~~d+2,!k.C))return G(),setTimeout(function(){G()},50),API.chatLog(c.i18n("historyCheck.inHistory",
b,u.length),!0)}if(0<b)return API.chatLog(c.i18n("historyCheck.inHistorySkipped",b,u.length),!0)}},D:function(a,b){b||(b="hh:mm");var c=a?new Date(a):new Date,d=c.getHours(),k=c.getMinutes(),c=c.getSeconds(),k=(10>k?"0":"")+k,c=(10>c?"0":"")+c;return b.split("hh").join((10>d?"0":"")+d).split("mm").join(k).split("ss").join(c)},r:function(a){if(0===a.indexOf("/commands"))return Y.print(),!0;if("/avail"==a||"/available"==a)return API.setStatus(0);if("/brb"==a||"/away"==a)return API.setStatus(1);if("/work"==
a||"/working"==a)return API.setStatus(2);if("/game"==a||"/gaming"==a)return API.setStatus(3);if("/join"==a)return API.djJoin();if("/leave"==a)return API.djLeave();if("/whoami"==a)return C(API.getUser().id);if("/refresh"==a)return b("#refresh-button").click();if("/version"==a)return API.chatLog(c.i18n("running",A));if("/mute"==a){if(0===API.getVolume())return;this.j=API.getVolume();return API.setVolume(0)}if("/link"==a)return API.sendChat("plugCubed : http://plugcubed.net");if("/unmute"==a)return 0<
API.getVolume()?API.setVolume(this.j):!0;if("/nextsong"==a){var g=API.getNextMedia(),e=-1;if(void 0===g)return API.chatLog(c.i18n("noNextSong"));var g=g.media,l;for(l in u)if(a=u[l],a.id==g.id&&(e=~~l+1,!a.C))return API.chatLog(c.i18n("nextsong",g.title,g.author)),API.chatLog(c.i18n("isHistory",e,u.length),!0);return API.chatLog(c.i18n("nextsong",g.title,g.author))}if("/automute"==a){a=API.getMedia();if(void 0===a)return;0>this.settings.registeredSongs.indexOf(a.id)?(this.settings.registeredSongs.push(a.id),
this.settings.autoMuted=!0,this.j=API.getVolume(),API.setVolume(0),API.chatLog(c.i18n("automute.registered",a.title))):(this.settings.registeredSongs.splice(this.settings.registeredSongs.indexOf(API.getMedia().id),1),this.settings.autoMuted=!1,API.setVolume(this.j),API.chatLog(c.i18n("automute.unregistered",a.title)));return this.g()}if(0===a.indexOf("/getpos"))l=B(a.substr(8)),l=null===l?API.getUser():l,a=API.getWaitListPosition(l.id),API.getDJ().id===l.id?API.chatLog(c.i18n("info.userDjing",l.id===
API.getUser().id?c.i18n("ranks.you"):n.cleanTypedString(l.username))):0===a?API.chatLog(c.i18n("info.userNextDJ",l.id===API.getUser().id?c.i18n("ranks.you"):n.cleanTypedString(l.username))):0<a?API.chatLog(c.i18n("info.inwaitlist",a+1,API.getWaitList().length)):API.chatLog(c.i18n("info.notinlist"));else if("/curate"==a)for(g in a=JSON.parse(d.getItem("playlist")),a){if(a[g].selected)return f.dispatch(new J(J.wa,a[g].id)),!0}else{if(0===a.indexOf("/ignore ")||0===a.indexOf("/unignore "))return l=B(a.substr(0===
a.indexOf("/ignore")?8:10)),null===l?(API.chatLog(c.i18n("error.userNotFound")),!0):l.id===API.getUser().id?(API.chatLog(c.i18n("error.ignoreSelf")),!0):-1<this.settings.ignore.indexOf(l.id)?(this.settings.ignore.splice(this.settings.ignore.indexOf(l.id),1),this.g(),API.chatLog(c.i18n("ignore.disabled",l.username)),!0):(this.settings.ignore.push(l.id),this.g(),API.chatLog(c.i18n("ignore.enabled",n.cleanTypedString(l.username))));if(p.isPlugCubedDeveloper()&&0===a.indexOf("/whois "))return"/whois all"===
a.toLowerCase()?M():C(a.substr(7));if(API.hasPermission(void 0,API.ROLE.AMBASSADOR)||p.isPlugCubedDeveloper()&&API.hasPermission(void 0,API.ROLE.MANAGER)){if(0===a.indexOf("/whois "))return"/whois all"===a.toLowerCase()?M():C(a.substr(7));if(0===a.indexOf("/banall")){if(9<a.length)for(l in g=API.getUser(),e=API.getUsers(),e)e[l].id!==g.id&&API.moderateBanUser(e[l].id,a.substr(9).trim());else API.chatLog(c.i18n("error.missingReason"));return}}if(API.hasPermission(void 0,API.ROLE.BOUNCER)){if(0===a.indexOf("/skip")){if(void 0===
API.getDJ())return;5<a.length&&API.sendChat("@"+API.getWaitList()[0].username+" - Reason for skip: "+a.substr(5).trim());return API.moderateForceSkip()}if(0===a.indexOf("/whois "))return C(a.substr(7));if(0===a.indexOf("/add "))return this.W(a.substr(5),"adddj");if(0===a.indexOf("/remove "))return this.W(a.substr(8),"removedj")}if(API.hasPermission(void 0,API.ROLE.MANAGER)){if("/lock"===a)return API.moderateLockWaitList(!0);if("/unlock"===a)return API.moderateLockWaitList(!1);"/lockskip"===a&&require(["f2428/fc44e/dc84c/e8d2a"],
function(a){k.get("boothLocked")?(API.once(API.DJ_ADVANCE,function(){(new a(k.get("id"),!1,!1)).parse=function(a){0!==a.status&&API.chatLog("Could not unlock booth",!0)}}),API.moderateForceSkip()):(new a(k.get("id"),!0,!1)).parse=function(b){0===b.status?(API.once(API.DJ_ADVANCE,function(){(new a(k.get("id"),!1,!1)).parse=function(a){0!==a.status&&API.chatLog("Could not unlock booth",!0)}}),API.moderateForceSkip()):API.chatLog("Could not lock booth",!0)}})}if(API.hasPermission(void 0,API.ROLE.HOST)||
p.isPlugCubedDeveloper()){if(0===a.indexOf("/strobe")){if(s.readyState!==SockJS.OPEN)return API.chatLog("Not connected to socket server",!0);l=a.split(" ");-1<a.indexOf("off")?s.send(JSON.stringify({type:"rave",value:0})):1<l.length&&x(l[1])&&50<=~~l[1]&&100>=~~l[1]?s.send(JSON.stringify({type:"rave",value:~~l[1]})):s.send(JSON.stringify({type:"rave",value:1}))}if(0===a.indexOf("/rave")){if(s.readyState!==SockJS.OPEN)return API.chatLog("Not connected to socket server",!0);-1<a.indexOf("off")?s.send(JSON.stringify({type:"rave",
value:0})):s.send(JSON.stringify({type:"rave",value:2}))}}}}})});
define("plugCubed/dialogs/CustomChatColors",["jquery","f2428/ad16d/f1b69","lang/Lang","f2428/ad16d/e4296","plugCubed/Lang"],function(b,m,h,f,e){var d;return new (m.extend({M:function(d,k,e){return b('<div class="item">').addClass("p3-s-cc-"+d).append(b("<span>").text(k)).append(b("<span>").addClass("default").css("display",plugCubed.settings.colors[d]===e?"none":"block").mouseover(function(){f.trigger("tooltip:show","Reset to default",b(this),!0)}).mouseout(function(){f.trigger("tooltip:hide")}).click(function(){b(this).parent().find("input").val(e);
b(this).parent().find(".example").css("background-color","#"+e);b(this).css("display","none");plugCubed.settings.colors[d]=e;plugCubed.g();plugCubed.B()})).append(b("<span>").addClass("example").css("background-color","#"+plugCubed.settings.colors[d])).append(b("<input>").val(plugCubed.settings.colors[d]).keyup(function(){I(b(this).val())&&(b(this).parent().find(".example").css("background-color","#"+b(this).val()),plugCubed.settings.colors[d]=b(this).val(),plugCubed.g(),plugCubed.B());b(this).parent().find(".default").css("display",
b(this).val()===e?"none":"block")}))},A:function(){if(void 0!==d)return"-270px"===d.css("left")?d.animate({left:b("#p3-settings").width()+1}):d.animate({left:-270});var f=b('<div class="container">').append(b('<div class="section">').text("User Ranks")),k;for(k in plugCubed.a.b)f.append(this.M(k,e.i18n(plugCubed.a.b[k].title),plugCubed.a.b[k].color));f.append(b('<div class="spacer">').append(b('<div class="divider">'))).append(b('<div class="section">').text(e.i18n("notify.header")));for(k in plugCubed.a.H)f.append(this.M(k,
e.i18n(plugCubed.a.H[k].title),plugCubed.a.H[k].color));d=b('<div id="p3-settings-custom-colors" style="left: -270px;">').append(b('<div class="header">').append(b('<div class="back">').append(b('<i class="icon icon-back"></i>')).click(function(){void 0!==d&&d.animate({left:-270})})).append(b('<div class="title">').append(b("<span>").text(e.i18n("menu.customchatcolors"))))).append(f).animate({left:b("#p3-settings").width()+1});b("body").append(d)},hide:function(){void 0!==d&&d.animate({left:-270})}}))});
define("plugCubed/dialogs/Userinfo","jquery f2428/d82ae/c5e1a/ec372 lang/Lang f2428/ad16d/f1b69 f2428/ad16d/e4296 f2428/a3a2b/f469b plugCubed/Lang".split(" "),function(b,m,h,f,e,d,n){return f.extend({init:function(b){e.dispatch(new d(d.ya,new m.extend({id:"dialog-userinfo",className:"dialog",A:function(){return this.o.append(this.getHeader(n.i18n("info.header"))).append(this.da().append(b)),this.Z()},submit:function(){this.close()}})))}})});
define("plugCubed/dialogs/Commands",["jquery","f2428/ad16d/f1b69","lang/Lang","plugCubed/Lang","plugCubed/Utils"],function(b,m,h,f,e){var d=[["/nick","change username"],["/avail","set status to available"],["/afk","set status to afk"],["/work","set status to working"],["/gaming","set status to gaming"],["/join","join dj booth/waitlist"],["/leave","leaves dj booth/waitlist"],["/whoami","get your own information"],["/mute","set volume to 0"],["/automute","register currently playing song to automatically mute on future plays"],
["/unmute","set volume to last volume"],["/nextsong","display next song in playlist and if it's in history"],["/refresh","refresh the video"],["/ignore (username)","ignore all chat messages from user"],["/alertson (word)","play mention sound whenever word is written in chat"],["/curate","add current song to your selected playlist"],["/getpos","get current waitlist position"],["/version","displays version number"],["/commands","shows this list"],["/link","paste link to plugCubed website in chat"]],
n=[["/whois (username)","gives general information about user",API.ROLE.BOUNCER],["/skip","skip current song",API.ROLE.BOUNCER],["/kick (username)","kicks targeted user",API.ROLE.BOUNCER],["/lockskip","locks DJ booth, skip and unlocks afterwards",API.ROLE.MANAGER],["/lock","locks DJ booth",API.ROLE.MANAGER],["/unlock","unlocks DJ booth",API.ROLE.MANAGER],["/add (username)","adds targeted user to dj booth/waitlist",API.ROLE.BOUNCER],["/remove (username)","removes targeted user from dj booth/waitlist",
API.ROLE.BOUNCER],["/strobe (on|off)","enable/disable strobe",API.ROLE.HOST],["/rave (on|off)","enable/disable lights out",API.ROLE.HOST],["/whois all","gives userid and username of all users in the room",API.ROLE.AMBASSADOR],["/kickall (reason)","kicks all users in the room with reason",API.ROLE.AMBASSADOR],["/banall (reason)","bans all users in the room with reason",API.ROLE.AMBASSADOR]];return new (m.extend({print:function(){var b='<strong style="position:absolute;left: 5px;">=== User Commands ===</strong><br />',
f;for(f in d)b+='<span style="position:absolute;left: 20px;">'+d[f][0]+'</span><br /><em style="position:absolute;left: 45px;">'+d[f][1]+"</em><br />";if(API.hasPermission(void 0,API.ROLE.BOUNCER))for(f in b+='<br /><strong style="position:absolute;left: 5px;">=== Moderation Commands ===</strong><br />',n)API.hasPermission(void 0,n[f][2])&&(b+='<span style="position:absolute;left: 20px;">'+n[f][0]+'</span><br /><em style="position:absolute;left: 45px;">'+n[f][1]+"</em><br />");e.appendChatMessage(b)}}))});
define("plugCubed/StyleManager",["jquery","f2428/ad16d/f1b69"],function(b,m){function h(){var b="",h;for(h in e)b+=e[h];f.text(b)}var f,e={};return new (m.extend({init:function(){f=b('<style type="text/css">');b("head").append(f)},set:function(b,f){e[b]=f;h()},has:function(b){return void 0!==e[b]},n:function(b){delete e[b]&&h()},aa:function(){e={};f.remove()}}))});
define("plugCubed/Utils",function(){return{isPlugCubedDeveloper:function(b){b||(b=API.getUser().id);return"50aeb31696fba52c3ca0adb6"==b},isPlugCubedSponsor:function(b){b||(b=API.getUser().id);return-1<["5121578196fba506408bb9eb"].indexOf(b)},isPlugCubedVIP:function(b){b||(b=API.getUser().id);return-1<["5112c273d6e4a94ec0554792","50b1961c96fba57db2230417","50aeb077877b9217e2fbff00","50aeb020d6e4a94f774740a9"].indexOf(b)},appendChatMessage:function(b,m){if(b){"string"!==typeof b&&(b=b.html());b=b.split("<script").join("");
var h=$("#chat-messages"),f=h.scrollTop()>h[0].scrollHeight-h.height()-20;h.append('<div class="update"><span class="text" style="color:#'+(m?m:"d1d1d1")+'">'+b+"</span></div>");f&&h.scrollTop(h[0].scrollHeight)}}}});
define("plugCubed/RoomUserListRow",["jquery","f2428/d82ae/dc84c/f68fe/f639c","plugCubed/Utils"],function(b,m,h){return m.extend({vote:function(){this.G.get("curated")||0!==this.G.get("vote")?(this.e||(this.e=b("<i/>").addClass("icon")),this.o.append(this.e),this.G.get("curated")?this.e.removeClass().addClass("icon icon-curate"):1==this.G.get("vote")?this.e.removeClass().addClass("icon icon-woot"):(API.hasPermission(void 0,API.ROLE.BOUNCER)||h.isPlugCubedDeveloper())&&this.e.removeClass().addClass("icon icon-meh")):
this.e&&(this.e.remove(),this.e=void 0)}})});
define("plugCubed/MenuView",["jquery","underscore","backbone","f2428/ad16d/e4296"],function(b,m,h,f){h.Ba.extend({id:"plug-cubed",Ka:function(){this.U=m.bind(this.oa,this);this.S=m.bind(this.ma,this);this.K=!1},A:function(){this.o.html();this.o.on("mousedown",m.bind(this.ka,this));this.L=this.va("#plug-cubed").remove();return this},ka:function(){this.K?this.hide():this.show()},show:function(){this.K=!0;f.trigger("settings:hide").trigger("playback:block");b("body").append(this.L);b("#plug-cubed .clickable").on("mousedown",
this.U);var e=this;m.defer(function(){b(document).on("mousedown",e.S)})},hide:function(){this.K=!1;b(document).off("mousedown",this.S);b("#plug-cubed .item").off("mousedown",this.U);f.trigger("playback:unblock");this.L.remove()},oa:function(e){e=b(e.target);e.is("span")&&e.parent()},ma:function(e){e=b(e.target);e.is("span")&&(e=e.parent());if(e.is("a")||e.hasClass("item")){var d=this;m.delay(function(){d.hide()},250)}else this.hide()}});return PlugMenuView});
define("plugCubed/Lang",["jquery","f2428/ad16d/f1b69"],function(b,m){var h={},f=!1;return new (m.extend({init:function(){var e=this;b.getJSON("http://alpha.plugcubed.net/langs/lang.en.json",function(b){h=b;f=!0}).error(function(){setTimeout(function(){e.init()},500)})},load:function(e,d){if(!f){var n=this;return setTimeout(function(){n.load(e,d)},500)}e&&"en"!==e?b.getJSON("http://alpha.plugcubed.net/langs/lang."+e+".json",function(e){h=b.extend(!0,h,e);d&&d()}).error(function(){d&&d()}):d&&d()},
i18n:function(b){var d=h,f;if(void 0===d)return"{"+b+"}";var k=b.split(".");for(f in k){if(void 0===d[k[f]])return"{"+b+"}";d=d[k[f]]}if(1<arguments.length)for(f=1;f<arguments.length;f++)d=d.split("%"+f).join(arguments[f]);return d}}))});
define("plugCubed/Loader","jquery f2428/ad16d/f1b69 plugCubed/Model f2428/e236c/edda5 f2428/d82ae/c5e1a/ec372 plugCubed/Lang plugCubed/Utils".split(" "),function(b,m,h,f,e,d,n){d=f.getItem("plugCubedLang");return null!==d&&"@@@"!==d?m.extend({init:function(){plugCubed=new h}}):e.extend({id:"plugCubedLang-panel",className:"dialog",A:function(){var d=this;console.log(d);this.i=[];b.getJSON("http://alpha.plugcubed.net/lang.json",function(f){d.i=f;this.o.append(this.getHeader("plug&#179; language")).append(this.da().append(this.Ga(this.ca())));
_.defer(_.bind(this.Ca,this));b(".lang-button").click(b.proxy(this.pa,this));return this.Z()}).done(function(){0===d.i.length&&n.appendChatMessage('<span style="color:#FF0000">Error loading plugCubed</span>')})},ca:function(){var d=this.i.length,f=b("<div/>");if(5<d)for(var e=0;e<d/5;e++)f.append(this.T(this.i.slice(5*e,5*e+5)).css("top",75*e));else f.append(this.T(this.i).css("top",75*e));return f},T:function(d){for(var f=b("<div/>").addClass("lang-row"),e=d.length,h=5==e?0:4==e?75:3==e?150:2==e?
225:300,m=0;m<e;++m){var n=b("<div/>").addClass("lang-button").css("display","inline-block").css("left",h).data("language",d[m].file).css("cursor","pointer").append(b("<img/>").attr("src","http://alpha.plugcubed.net/flags/flag."+d[m].file+".png").attr("alt",d[m].name).height(75).width(150));f.append(n);h+=150}return f},pa:function(d){d=b(d.currentTarget);f.setItem("plugCubedLang",d.data("language"),!0);plugCubed=new h;this.close()}})});require(["plugCubed/Model"],function(b){plugCubed=new b});
